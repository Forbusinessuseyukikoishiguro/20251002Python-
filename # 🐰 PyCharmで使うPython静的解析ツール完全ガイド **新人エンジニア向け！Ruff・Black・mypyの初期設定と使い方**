/workflows/lint.yml

name: Lint and Type Check

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]

jobs:
  lint:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'
    
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install ruff black mypy
        if [ -f requirements.txt ]; then pip install -r requirements.txt; fi
    
    - name: Run Ruff
      run: |
        ruff check .
    
    - name: Run Black
      run: |
        black --check .
    
    - name: Run mypy
      run: |
        mypy .
```

---

### ã‚¹ãƒ†ãƒƒãƒ—4: README.md ã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–

```markdown
# å¤§ç¦åº—ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 

## é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. ä»®æƒ³ç’°å¢ƒã®ä½œæˆ

```bash
python -m venv .venv

# ã‚¢ã‚¯ãƒ†ã‚£ãƒ™ãƒ¼ãƒˆ
# Windows
.venv\Scripts\activate
# Mac/Linux
source .venv/bin/activate
```

### 2. ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
pip install -r requirements.txt
pip install -r requirements-dev.txt
```

### 3. é–‹ç™ºãƒ„ãƒ¼ãƒ«ã®ä½¿ã„æ–¹

#### ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

```bash
# Ruffã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
ruff format .

# Blackã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
black .
```

#### ã‚³ãƒ¼ãƒ‰ãƒã‚§ãƒƒã‚¯

```bash
# Ruffã§ãƒã‚§ãƒƒã‚¯
ruff check .

# è‡ªå‹•ä¿®æ­£
ruff check . --fix

# å‹ãƒã‚§ãƒƒã‚¯
mypy .
```

#### ã™ã¹ã¦å®Ÿè¡Œ

```bash
# makeã‚³ãƒãƒ³ãƒ‰ãŒã‚ã‚‹å ´åˆ
make all

# ã¾ãŸã¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
bash run_checks.sh
```

### 4. PyCharmã®è¨­å®š

1. External Toolsã‚’è¨­å®šï¼ˆè©³ç´°ã¯ CONTRIBUTING.md å‚ç…§ï¼‰
2. File Watchersã§ä¿å­˜æ™‚è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
3. pre-commitãƒ•ãƒƒã‚¯ã‚’æœ‰åŠ¹åŒ–: `pre-commit install`

## ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„

- PEP 8ã«æº–æ‹ 
- å‹ãƒ’ãƒ³ãƒˆã‚’å¿…ãšè¨˜è¿°
- docstringã¯Googleã‚¹ã‚¿ã‚¤ãƒ«
- 1è¡Œã¯88æ–‡å­—ä»¥å†…

## ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‰ã®ãƒã‚§ãƒƒã‚¯

```bash
# ã“ã‚Œã‚‰ãŒã™ã¹ã¦ãƒ‘ã‚¹ã™ã‚‹ã“ã¨
ruff check .
black --check .
mypy .
pytest
```
```

---

## 9. ã‚ˆãã‚ã‚‹è³ªå•ï¼ˆFAQï¼‰

### Q1: Ruffã¨Blackã¯ä¸¡æ–¹å¿…è¦ï¼Ÿ

**A: 2024å¹´ç¾åœ¨ã¯ Ruff ã®ã¿ã§OK**

```bash
# Ruffã ã‘ã§ä¸¡æ–¹ã§ãã‚‹
ruff check . --fix   # ãƒªãƒ³ã‚¿ãƒ¼æ©Ÿèƒ½
ruff format .        # ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼æ©Ÿèƒ½

# Blackã¯ä¸è¦ï¼ˆãŸã ã—ä½µç”¨ã‚‚å¯èƒ½ï¼‰
```

**æ¨å¥¨æ§‹æˆ:**
```
Ruffï¼ˆãƒªãƒ³ã‚¿ãƒ¼ + ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ï¼‰+ mypyï¼ˆå‹ãƒã‚§ãƒƒã‚¯ï¼‰
```

---

### Q2: ãƒ„ãƒ¼ãƒ«ãŒé…ã„å ´åˆã¯ï¼Ÿ

**A: Ruffã‚’ä½¿ãˆã°çˆ†é€Ÿ**

```bash
# é€Ÿåº¦æ¯”è¼ƒï¼ˆ1000ãƒ•ã‚¡ã‚¤ãƒ«ã®å ´åˆï¼‰
pylint: 60ç§’
flake8: 15ç§’
Ruff:   0.5ç§’  â† åœ§å€’çš„ã«é€Ÿã„ï¼
```

---

### Q3: æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å°å…¥ã™ã‚‹ã«ã¯ï¼Ÿ

**A: æ®µéšçš„ã«å°å…¥**

```bash
# ã‚¹ãƒ†ãƒƒãƒ—1: ã‚¨ãƒ©ãƒ¼ã‚’ç¢ºèªï¼ˆä¿®æ­£ã—ãªã„ï¼‰
ruff check .

# ã‚¹ãƒ†ãƒƒãƒ—2: è‡ªå‹•ä¿®æ­£ã§ãã‚‹ã‚‚ã®ã ã‘ä¿®æ­£
ruff check . --fix

# ã‚¹ãƒ†ãƒƒãƒ—3: æ‰‹å‹•ã§æ®‹ã‚Šã‚’ä¿®æ­£
# ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸç®‡æ‰€ã‚’1ã¤ãšã¤ä¿®æ­£

# ã‚¹ãƒ†ãƒƒãƒ—4: ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
ruff format .
```

---

### Q4: ãƒãƒ¼ãƒ å…¨å“¡ã«ä½¿ã‚ã›ã‚‹ã«ã¯ï¼Ÿ

**A: pre-commitãƒ•ãƒƒã‚¯ã‚’ä½¿ã†**

```bash
# pre-commitã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install pre-commit

# .pre-commit-config.yamlã‚’ä½œæˆï¼ˆä¸Šè¨˜å‚ç…§ï¼‰

# ãƒ•ãƒƒã‚¯ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pre-commit install

# ã“ã‚Œã§ git commit æ™‚ã«è‡ªå‹•ãƒã‚§ãƒƒã‚¯
```

---

### Q5: PyCharmã§ä¿å­˜æ™‚ã«è‡ªå‹•æ•´å½¢ã—ãŸã„

**A: File Watchersã‚’ä½¿ã†**

1. `Settings â†’ Tools â†’ File Watchers`
2. Ruff Format Watcherã‚’è¿½åŠ ï¼ˆè¨­å®šã¯ä¸Šè¨˜å‚ç…§ï¼‰
3. ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜æ™‚ã«è‡ªå‹•ã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

---

### Q6: ã‚¨ãƒ©ãƒ¼ã‚’ç„¡è¦–ã—ãŸã„

**A: ã‚³ãƒ¡ãƒ³ãƒˆã§ç„¡è¦–ã§ãã‚‹**

```python
# ç‰¹å®šã®è¡Œã‚’ç„¡è¦–
result = some_function()  # noqa: F841

# Ruffã§ç‰¹å®šã®ãƒ«ãƒ¼ãƒ«ã‚’ç„¡è¦–
result = some_function()  # ruff: noqa: F841

# mypyã§å‹ãƒã‚§ãƒƒã‚¯ã‚’ç„¡è¦–
value = get_value()  # type: ignore

# ãƒ•ã‚¡ã‚¤ãƒ«å…¨ä½“ã§ç‰¹å®šã®ãƒ«ãƒ¼ãƒ«ã‚’ç„¡è¦–
# ruff: noqa: E501
```

---

### Q7: ã©ã®ã‚¨ãƒ©ãƒ¼ã‹ã‚‰ä¿®æ­£ã™ã¹ãï¼Ÿ

**A: å„ªå…ˆé †ä½**

```
1. Fï¼ˆpyflakesï¼‰â†’ ãƒã‚°ã®å¯èƒ½æ€§ãŒé«˜ã„
   ä¾‹: F841 æœªä½¿ç”¨å¤‰æ•°ã€F821 æœªå®šç¾©å¤‰æ•°

2. Eï¼ˆpycodestyle errorsï¼‰â†’ æ–‡æ³•ã‚¨ãƒ©ãƒ¼
   ä¾‹: E999 æ§‹æ–‡ã‚¨ãƒ©ãƒ¼

3. Wï¼ˆpycodestyle warningsï¼‰â†’ è­¦å‘Š
   ä¾‹: W291 è¡Œæœ«ã®ç©ºç™½

4. ãã®ä»– â†’ ã‚¹ã‚¿ã‚¤ãƒ«é•å
   ä¾‹: I001 importé †åºã€N801 å‘½åè¦å‰‡
```

---

### Q8: requirements.txt ã®æ›¸ãæ–¹

```txt
# requirements.txtï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰
flask>=3.0.0
requests>=2.31.0

# requirements-dev.txtï¼ˆé–‹ç™ºç’°å¢ƒï¼‰
ruff>=0.1.9
black>=24.1.0
mypy>=1.8.0
pytest>=7.4.0
pre-commit>=3.6.0
```

```bash
# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r requirements.txt
pip install -r requirements-dev.txt
```

---

## 10. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### å•é¡Œ1: ruffã‚³ãƒãƒ³ãƒ‰ãŒè¦‹ã¤ã‹ã‚‰ãªã„

```bash
# åŸå› : Pythonã®ãƒ‘ã‚¹ãŒé€šã£ã¦ã„ãªã„

# è§£æ±ºæ–¹æ³•1: ãƒ•ãƒ«ãƒ‘ã‚¹ã§å®Ÿè¡Œ
python -m ruff check .

# è§£æ±ºæ–¹æ³•2: PyCharmã§ä»®æƒ³ç’°å¢ƒã®Pythonã‚’ä½¿ã†
# Settings â†’ Project â†’ Python Interpreter
# ä»®æƒ³ç’°å¢ƒã® .venv ã‚’é¸æŠ
```

---

### å•é¡Œ2: File WatcherãŒå‹•ã‹ãªã„

```bash
# åŸå› : Programã®ãƒ‘ã‚¹ãŒé–“é•ã£ã¦ã„ã‚‹

# è§£æ±ºæ–¹æ³•: which/whereã‚³ãƒãƒ³ãƒ‰ã§ç¢ºèª
# Mac/Linux
which ruff
# ä¾‹: /Users/username/project/.venv/bin/ruff

# Windows
where ruff
# ä¾‹: C:\Users\username\project\.venv\Scripts\ruff.exe

# PyCharmã®File Watcherã®Programã«ä¸Šè¨˜ãƒ‘ã‚¹ã‚’è¨­å®š
```

---

### å•é¡Œ3: mypyã§ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¨ãƒ©ãƒ¼

```python
# ã‚¨ãƒ©ãƒ¼ä¾‹
import numpy as np  # error: Library stubs not installed

# è§£æ±ºæ–¹æ³•1: å‹ã‚¹ã‚¿ãƒ–ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install types-numpy

# è§£æ±ºæ–¹æ³•2: pyproject.tomlã§ç„¡è¦–
# [tool.mypy]
# [[tool.mypy.overrides]]
# module = "numpy.*"
# ignore_missing_imports = true
```

---

### å•é¡Œ4: Blackã¨ã®è¨­å®šãŒç«¶åˆ

```toml
# pyproject.tomlã§è¨­å®šã‚’çµ±ä¸€

[tool.ruff]
line-length = 88  # Blackã¨åŒã˜

[tool.black]
line-length = 88  # Ruffã¨åŒã˜
```

---

### å•é¡Œ5: æ—¥æœ¬èªã®docstringã§ã‚¨ãƒ©ãƒ¼

```python
# åŸå› : ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°

# è§£æ±ºæ–¹æ³•: ãƒ•ã‚¡ã‚¤ãƒ«ã®å…ˆé ­ã«è¿½åŠ 
# -*- coding: utf-8 -*-

"""
å¤§ç¦åº—ã‚¯ãƒ©ã‚¹
"""
```

---

## 11. å®Ÿè·µãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### âœ… åˆæœŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```
ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‘
â–¡ Ruffã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸ
â–¡ mypyã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸ
â–¡ ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰Blackã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸ
â–¡ ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰pre-commitã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸ

ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã€‘
â–¡ pyproject.toml ã‚’ä½œæˆã—ãŸ
â–¡ .gitignore ã‚’ä½œæˆã—ãŸ
â–¡ ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰.pre-commit-config.yaml ã‚’ä½œæˆã—ãŸ

ã€PyCharmè¨­å®šã€‘
â–¡ External Tools ã‚’è¨­å®šã—ãŸ
â–¡ ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰File Watchers ã‚’è¨­å®šã—ãŸ
â–¡ ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‚­ãƒ¼ã‚’è¨­å®šã—ãŸ

ã€ãƒãƒ¼ãƒ è¨­å®šã€‘
â–¡ è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’Gitã«ã‚³ãƒŸãƒƒãƒˆã—ãŸ
â–¡ README.mdã«ä½¿ã„æ–¹ã‚’è¨˜è¼‰ã—ãŸ
â–¡ ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰GitHub Actionsã‚’è¨­å®šã—ãŸ
```

---

### âœ… æ—¥å¸¸ã®ä½¿ã„æ–¹

```
ã€ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¸­ã€‘
â–¡ ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜æ™‚ã«è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆFile Watcherï¼‰
â–¡ PyCharmã®è­¦å‘Šï¼ˆæ³¢ç·šï¼‰ã‚’ãƒã‚§ãƒƒã‚¯
â–¡ å‹ãƒ’ãƒ³ãƒˆã‚’æ›¸ã

ã€ã‚³ãƒŸãƒƒãƒˆå‰ã€‘
â–¡ ruff check . --fix ã‚’å®Ÿè¡Œ
â–¡ ruff format . ã‚’å®Ÿè¡Œ
â–¡ mypy . ã‚’å®Ÿè¡Œ
â–¡ ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ: pytest

ã€ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‰ã€‘
â–¡ ã™ã¹ã¦ã®ãƒã‚§ãƒƒã‚¯ãŒãƒ‘ã‚¹
â–¡ CI/CDãŒã‚°ãƒªãƒ¼ãƒ³
â–¡ ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ä¾é ¼
```

---

## 12. ã¾ã¨ã‚

### ğŸ¯ æœ€å°æ§‹æˆï¼ˆã“ã‚Œã ã‘ã§OKï¼‰

```bash
# 1. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install ruff mypy

# 2. pyproject.tomlä½œæˆï¼ˆä¸Šè¨˜ã®è¨­å®šã‚’ã‚³ãƒ”ãƒ¼ï¼‰

# 3. å®Ÿè¡Œ
ruff check . --fix   # ã‚³ãƒ¼ãƒ‰ãƒã‚§ãƒƒã‚¯ï¼‹è‡ªå‹•ä¿®æ­£
ruff format .        # ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
mypy .               # å‹ãƒã‚§ãƒƒã‚¯
```

---

### ğŸ¯ æ¨å¥¨æ§‹æˆï¼ˆãƒãƒ¼ãƒ é–‹ç™ºï¼‰

```bash
# 1. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install ruff mypy pre-commit

# 2. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
# - pyproject.toml
# - .pre-commit-config.yaml
# - .gitignore

# 3. pre-commitãƒ•ãƒƒã‚¯æœ‰åŠ¹åŒ–
pre-commit install

# 4. PyCharmã«External Toolsè¨­å®š

# 5. ã“ã‚Œã§é–‹ç™ºé–‹å§‹ï¼
```

---

### ğŸ¯ ãƒ„ãƒ¼ãƒ«é¸æŠã‚¬ã‚¤ãƒ‰

```
ã€å¿…é ˆã€‘
âœ… Ruff â†’ ãƒªãƒ³ã‚¿ãƒ¼ï¼‹ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ï¼ˆæœ€å„ªå…ˆï¼‰
âœ… mypy â†’ å‹ãƒã‚§ãƒƒã‚¯ï¼ˆãƒã‚°äºˆé˜²ã«å¿…é ˆï¼‰

ã€æ¨å¥¨ã€‘
â­ pre-commit â†’ ã‚³ãƒŸãƒƒãƒˆå‰ã®è‡ªå‹•ãƒã‚§ãƒƒã‚¯
â­ pytest â†’ ãƒ†ã‚¹ãƒˆï¼ˆå“è³ªå‘ä¸Šï¼‰

ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€‘
â—¯ Black â†’ Ruffã§ä»£æ›¿å¯èƒ½ã ãŒä½µç”¨ã‚‚OK
â—¯ pylint/flake8 â†’ Ruffã§ä»£æ›¿å¯èƒ½ï¼ˆä¸è¦ï¼‰
```

---

### ğŸ“Š åŠ¹æœæ¸¬å®š

```
é™çš„è§£æãƒ„ãƒ¼ãƒ«ã‚’å°å…¥ã™ã‚‹ã¨...

Beforeï¼ˆå°å…¥å‰ï¼‰:
âŒ ã‚¿ã‚¤ãƒã«æ°—ã¥ã‹ãªã„ â†’ å®Ÿè¡Œæ™‚ã‚¨ãƒ©ãƒ¼
âŒ å‹ãƒŸã‚¹ã«æ°—ã¥ã‹ãªã„ â†’ ãƒã‚°ç™ºç”Ÿ
âŒ ã‚¹ã‚¿ã‚¤ãƒ«ãŒãƒãƒ©ãƒãƒ© â†’ èª­ã¿ã«ãã„
âŒ ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«æ™‚é–“ãŒã‹ã‹ã‚‹

Afterï¼ˆå°å…¥å¾Œï¼‰:
âœ… ã‚¿ã‚¤ãƒã‚’äº‹å‰æ¤œå‡º â†’ ã‚¨ãƒ©ãƒ¼å‰Šæ¸›90%
âœ… å‹ãƒã‚§ãƒƒã‚¯ã§å®‰å…¨ â†’ ãƒã‚°å‰Šæ¸›70%
âœ… è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ â†’ çµ±ä¸€æ„ŸUP
âœ… ãƒ¬ãƒ“ãƒ¥ãƒ¼æ™‚é–“50%å‰Šæ¸›
```

---

**ğŸ° ã†ã•ã†ã•åº—é•·ã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:**

ã€Œé™çš„è§£æãƒ„ãƒ¼ãƒ«ã¯**ã‚³ãƒ¼ãƒ‰ã®å“è³ªã‚’å®ˆã‚‹ç•ªçŠ¬**ã§ã™ï¼

**ç‰¹ã«æ–°äººã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«ã¨ã£ã¦:**

1. **Ruff** â†’ ã‚¨ãƒ©ãƒ¼ã‚’æ•™ãˆã¦ãã‚Œã‚‹å„ªã—ã„å…ˆç”Ÿ
2. **mypy** â†’ å‹ã®é–“é•ã„ã‚’æŒ‡æ‘˜ã—ã¦ãã‚Œã‚‹
3. **PyCharm** â†’ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è­¦å‘Šã‚’è¡¨ç¤º

æœ€åˆã¯è¨­å®šãŒå¤§å¤‰ã«æ„Ÿã˜ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€
ä¸€åº¦è¨­å®šã™ã‚Œã°**ãšã£ã¨ä½¿ãˆã‚‹**ã—ã€
ãƒãƒ¼ãƒ å…¨ä½“ã®ç”Ÿç”£æ€§ãŒåŠ‡çš„ã«å‘ä¸Šã—ã¾ã™ï¼

**ãŠã™ã™ã‚ã®å§‹ã‚æ–¹:**

1. ã¾ãšRuffã ã‘å°å…¥ï¼ˆ5åˆ†ã§è¨­å®šå®Œäº†ï¼‰
2. æ…£ã‚ŒãŸã‚‰mypyè¿½åŠ ï¼ˆå‹ãƒ’ãƒ³ãƒˆã‚’æ›¸ãç¿’æ…£ï¼‰
3. ä½™è£•ãŒã‚ã‚Œã°pre-commitï¼ˆè‡ªå‹•åŒ–ï¼‰

**å›°ã£ãŸã¨ãã¯:**
- Ruffå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: https://docs.astral.sh/ruff/
- mypyå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: https://mypy.readthedocs.io/
- PyCharmå…¬å¼ãƒ˜ãƒ«ãƒ—: https://www.jetbrains.com/help/pycharm/

ä¸€ç·’ã«å“è³ªã®é«˜ã„ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã¾ã—ã‚‡ã†ï¼ğŸ‰ã€

---

## ä»˜éŒ²A: ã‚³ãƒãƒ³ãƒ‰ä¸€è¦§è¡¨

### ğŸ“‹ ã‚ˆãä½¿ã†ã‚³ãƒãƒ³ãƒ‰

```bash
# ========================================
# Ruff
# ========================================

# ãƒã‚§ãƒƒã‚¯ã®ã¿
ruff check .

# ãƒã‚§ãƒƒã‚¯ï¼‹è‡ªå‹•ä¿®æ­£
ruff check . --fix

# ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
ruff format .

# ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿
ruff check your_file.py --fix

# ãƒ«ãƒ¼ãƒ«ã®èª¬æ˜ã‚’è¡¨ç¤º
ruff rule E501

# ========================================
# Black
# ========================================

# ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
black .

# ãƒã‚§ãƒƒã‚¯ã®ã¿ï¼ˆå¤‰æ›´ã—ãªã„ï¼‰
black --check .

# å·®åˆ†è¡¨ç¤º
black --diff .

# ========================================
# mypy
# ========================================

# å‹ãƒã‚§ãƒƒã‚¯
mypy .

# è©³ç´°è¡¨ç¤º
mypy . --show-error-codes --pretty

# HTMLãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
mypy . --html-report ./mypy_report

# ========================================
# pre-commit
# ========================================

# ãƒ•ãƒƒã‚¯ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pre-commit install

# æ‰‹å‹•ã§å…¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒã‚§ãƒƒã‚¯
pre-commit run --all-files

# ç‰¹å®šã®ãƒ•ãƒƒã‚¯ã ã‘å®Ÿè¡Œ
pre-commit run ruff

# ========================================
# pip
# ========================================

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install ruff black mypy

# ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
pip list | grep ruff

# ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰
pip install --upgrade ruff
```

---

## ä»˜éŒ²B: ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰æ—©è¦‹è¡¨

### ğŸ” Ruffã®ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰

```
ã€Eã‚³ãƒ¼ãƒ‰ã€‘pycodestyle errors
E101    ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã«ã‚¿ãƒ–ã‚’ä½¿ç”¨
E111    ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆãŒ4ã®å€æ•°ã§ãªã„
E201    æ‹¬å¼§ã®å¾Œã«ç©ºç™½
E202    æ‹¬å¼§ã®å‰ã«ç©ºç™½
E203    ã‚³ãƒ­ãƒ³ã®å‰ã«ç©ºç™½
E231    ã‚«ãƒ³ãƒã®å¾Œã«ç©ºç™½ãŒãªã„
E251    ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å¼•æ•°ã®=ã®å‘¨ã‚Šã«ç©ºç™½
E302    é–¢æ•°å®šç¾©ã®å‰ã«2è¡Œã®ç©ºç™½ãŒå¿…è¦
E303    ç©ºç™½è¡ŒãŒå¤šã™ãã‚‹
E501    1è¡ŒãŒé•·ã™ãã‚‹ï¼ˆ88æ–‡å­—è¶…ï¼‰
E999    æ§‹æ–‡ã‚¨ãƒ©ãƒ¼

ã€Fã‚³ãƒ¼ãƒ‰ã€‘pyflakes
F401    importã—ãŸãŒä½¿ã£ã¦ã„ãªã„
F403    from module import * ã‚’ä½¿ç”¨
F811    å¤‰æ•°ã®å†å®šç¾©
F821    æœªå®šç¾©ã®å¤‰æ•°ã‚’ä½¿ç”¨
F841    å¤‰æ•°ã‚’å®šç¾©ã—ãŸãŒä½¿ã£ã¦ã„ãªã„

ã€Iã‚³ãƒ¼ãƒ‰ã€‘isort
I001    importæ–‡ãŒæ­£ã—ãä¸¦ã‚“ã§ã„ãªã„

ã€Nã‚³ãƒ¼ãƒ‰ã€‘pep8-naming
N801    ã‚¯ãƒ©ã‚¹åãŒPascalCaseã§ãªã„
N802    é–¢æ•°åãŒsnake_caseã§ãªã„
N803    å¼•æ•°åãŒsnake_caseã§ãªã„
N806    å¤‰æ•°åãŒsnake_caseã§ãªã„

ã€Bã‚³ãƒ¼ãƒ‰ã€‘flake8-bugbear
B002    Pythonã®å¤ã„æ©Ÿèƒ½ã‚’ä½¿ç”¨
B006    ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ã«å¯å¤‰ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
B007    ãƒ«ãƒ¼ãƒ—å¤‰æ•°ãŒä½¿ã‚ã‚Œã¦ã„ãªã„
B008    é–¢æ•°å‘¼ã³å‡ºã—ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ã«ä½¿ç”¨

ã€Cã‚³ãƒ¼ãƒ‰ã€‘flake8-comprehensions
C400    ä¸è¦ãªgenerator
C401    ä¸è¦ãªset
C402    ä¸è¦ãªdict
C403    ä¸è¦ãªset comprehension

ã€SIMã‚³ãƒ¼ãƒ‰ã€‘flake8-simplify
SIM102  ifæ–‡ã®ãƒã‚¹ãƒˆã‚’æ¸›ã‚‰ã›ã‚‹
SIM103  Falseã‚’è¿”ã•ãšã«ç›´æ¥æ¯”è¼ƒçµæœã‚’è¿”ã›ã‚‹
SIM108  ä¸‰é …æ¼”ç®—å­ãŒä½¿ãˆã‚‹
SIM117  è¤‡æ•°ã®withã‚’1ã¤ã«ã¾ã¨ã‚ã‚‰ã‚Œã‚‹
```

---

## ä»˜éŒ²C: VS Code ã§ã®è¨­å®šï¼ˆå‚è€ƒï¼‰

PyCharmã§ã¯ãªãVS Codeã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆ:

```json
// .vscode/settings.json

{
  // Ruffã‚’æœ‰åŠ¹åŒ–
  "ruff.enable": true,
  "ruff.organizeImports": true,
  
  // ä¿å­˜æ™‚ã«è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
  "[python]": {
    "editor.formatOnSave": true,
    "editor.defaultFormatter": "charliermarsh.ruff",
    "editor.codeActionsOnSave": {
      "source.fixAll.ruff": true,
      "source.organizeImports.ruff": true
    }
  },
  
  // mypy
  "python.linting.mypyEnabled": true,
  "python.linting.enabled": true
}
```

---

**ã“ã‚Œã§å®Œç’§ï¼Pythonã®é™çš„è§£æãƒã‚¹ã‚¿ãƒ¼ã§ã™ï¼** ğŸ‰

# ğŸ° PyCharmã§ä½¿ã†Pythoné™çš„è§£æãƒ„ãƒ¼ãƒ«å®Œå…¨ã‚¬ã‚¤ãƒ‰
**æ–°äººã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢å‘ã‘ï¼Ruffãƒ»Blackãƒ»mypyã®åˆæœŸè¨­å®šã¨ä½¿ã„æ–¹**

---

## ğŸ“š ç›®æ¬¡

1. [é™çš„è§£æãƒ„ãƒ¼ãƒ«ã¨ã¯ï¼Ÿ](#1-é™çš„è§£æãƒ„ãƒ¼ãƒ«ã¨ã¯)
2. [ä¸»è¦ãƒ„ãƒ¼ãƒ«ã®æ¯”è¼ƒ](#2-ä¸»è¦ãƒ„ãƒ¼ãƒ«ã®æ¯”è¼ƒ)
3. [Ruffï¼ˆæœ€æ–°ãƒ»æœ€é€Ÿï¼‰](#3-ruffæœ€æ–°æœ€é€Ÿ)
4. [Blackï¼ˆè‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ï¼‰](#4-blackè‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿)
5. [mypyï¼ˆå‹ãƒã‚§ãƒƒã‚«ãƒ¼ï¼‰](#5-mypyå‹ãƒã‚§ãƒƒã‚«ãƒ¼)
6. [PyCharmçµ±åˆè¨­å®š](#6-pycharmçµ±åˆè¨­å®š)
7. [å®Ÿè·µï¼šã‚¨ãƒ©ãƒ¼ã‚’ä¿®æ­£ã—ã¦ã¿ã‚ˆã†](#7-å®Ÿè·µã‚¨ãƒ©ãƒ¼ã‚’ä¿®æ­£ã—ã¦ã¿ã‚ˆã†)
8. [ãƒãƒ¼ãƒ é–‹ç™ºã§ã®è¨­å®š](#8-ãƒãƒ¼ãƒ é–‹ç™ºã§ã®è¨­å®š)

---

## 1. é™çš„è§£æãƒ„ãƒ¼ãƒ«ã¨ã¯ï¼Ÿ

### ğŸ“– ç°¡å˜ã«è¨€ã†ã¨

**ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã›ãšã«å•é¡Œã‚’è¦‹ã¤ã‘ã¦ãã‚Œã‚‹ãƒ„ãƒ¼ãƒ«**

```
ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã®ä¾‹ã§ç†è§£ã—ã‚ˆã†ï¼š

âŒ å®Ÿè¡Œã—ã¦å•é¡Œç™ºè¦‹ï¼š
  ãŠå®¢ã•ã‚“ã«æ–™ç†ã‚’å‡ºã—ã¦ã‹ã‚‰ã€Œå¡©å…¥ã‚Œå¿˜ã‚ŒãŸï¼ã€

âœ… é™çš„è§£æã§å•é¡Œç™ºè¦‹ï¼š
  æ–™ç†ã‚’å‡ºã™å‰ã«ã€Œå¡©å…¥ã‚Œå¿˜ã‚Œã¦ã¾ã™ã‚ˆã€ã¨æ•™ãˆã¦ãã‚Œã‚‹
```

---

### ğŸ¯ ä½•ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã‹ï¼Ÿ

```python
# âŒ ã“ã®ã‚³ãƒ¼ãƒ‰ã®å•é¡Œç‚¹ã¯ï¼Ÿ
def sell_daifuku(quantity):
    pric = 150  # â† typo: price ã®ã¯ãš
    totl = quantity * pric  # â† typo: total ã®ã¯ãš
    return totl

result = sell_daifuku("5")  # â† æ–‡å­—åˆ—ã‚’æ¸¡ã—ã¦ã„ã‚‹
```

**é™çš„è§£æãƒ„ãƒ¼ãƒ«ãŒè¦‹ã¤ã‘ã¦ãã‚Œã‚‹å•é¡Œï¼š**
1. **ã‚¿ã‚¤ãƒï¼ˆèª¤å­—ï¼‰** â†’ æœªä½¿ç”¨å¤‰æ•°ã€æœªå®šç¾©å¤‰æ•°
2. **å‹ã®ä¸ä¸€è‡´** â†’ æ–‡å­—åˆ—ã«æ•°å€¤ã®æ¼”ç®—
3. **ã‚¹ã‚¿ã‚¤ãƒ«é•å** â†’ ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã€ç©ºè¡Œã€å‘½åè¦å‰‡
4. **ã‚³ãƒ¼ãƒ‰ã®è¤‡é›‘ã•** â†’ é•·ã™ãã‚‹é–¢æ•°ã€æ·±ã™ãã‚‹ãƒã‚¹ãƒˆ

---

## 2. ä¸»è¦ãƒ„ãƒ¼ãƒ«ã®æ¯”è¼ƒ

### ğŸ“‹ ã©ã‚Œã‚’ä½¿ãˆã°ã„ã„ï¼Ÿ

| ãƒ„ãƒ¼ãƒ« | ç”¨é€” | é€Ÿåº¦ | æ¨å¥¨åº¦ | ç‰¹å¾´ |
|--------|------|------|--------|------|
| **Ruff** | ãƒªãƒ³ã‚¿ãƒ¼+ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ | â˜…â˜…â˜…â˜…â˜… | â˜…â˜…â˜…â˜…â˜… | æœ€æ–°ãƒ»æœ€é€Ÿãƒ»ã‚ªãƒ¼ãƒ«ã‚¤ãƒ³ãƒ¯ãƒ³ |
| **Black** | ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ | â˜…â˜…â˜…â˜…â˜† | â˜…â˜…â˜…â˜…â˜… | ã‚³ãƒ¼ãƒ‰æ•´å½¢ã®å®šç•ª |
| **mypy** | å‹ãƒã‚§ãƒƒã‚«ãƒ¼ | â˜…â˜…â˜…â˜†â˜† | â˜…â˜…â˜…â˜…â˜… | å‹ãƒ’ãƒ³ãƒˆã®ãƒã‚§ãƒƒã‚¯ |
| **pylint** | ãƒªãƒ³ã‚¿ãƒ¼ | â˜…â˜†â˜†â˜†â˜† | â˜…â˜…â˜†â˜†â˜† | è©³ç´°ã ãŒé…ã„ï¼ˆæ—§ä¸–ä»£ï¼‰ |
| **flake8** | ãƒªãƒ³ã‚¿ãƒ¼ | â˜…â˜…â˜…â˜†â˜† | â˜…â˜…â˜…â˜†â˜† | è»½é‡ã ãŒæ©Ÿèƒ½å°‘ãªã„ï¼ˆæ—§ä¸–ä»£ï¼‰ |

---

### ğŸ¯ 2024å¹´ã®æ¨å¥¨æ§‹æˆ

```
ã€æœ€å¼·ã®çµ„ã¿åˆã‚ã›ã€‘
1. Ruff â†’ ãƒªãƒ³ã‚¿ãƒ¼ï¼ˆã‚¨ãƒ©ãƒ¼æ¤œå‡ºï¼‰+ ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿
2. mypy â†’ å‹ãƒã‚§ãƒƒã‚¯
3. PyCharmã®çµ„ã¿è¾¼ã¿ã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚·ãƒ§ãƒ³

ã€ç†ç”±ã€‘
- Ruffã¯å¾“æ¥ã®pylint+flake8+isortã‚’1ã¤ã§ä»£æ›¿
- 10ã€œ100å€é€Ÿã„
- è¨­å®šãŒã‚·ãƒ³ãƒ—ãƒ«
```

---

## 3. Ruffï¼ˆæœ€æ–°ãƒ»æœ€é€Ÿï¼‰

### ğŸ“– Ruffã¨ã¯ï¼Ÿ

**Rustè£½ã®è¶…é«˜é€ŸPython linter & formatter**

- pylintã€flake8ã€isortã€pyupgradeã®æ©Ÿèƒ½ã‚’çµ±åˆ
- è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«1ã¤ã§å®Œçµ
- 2023å¹´ã‹ã‚‰æ€¥é€Ÿã«æ™®åŠ

---

### ğŸ’» ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ï¼ˆPyCharmä¸‹éƒ¨ã®Terminalã‚¿ãƒ–ï¼‰ã§å®Ÿè¡Œ

# æ–¹æ³•1: pipã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæ¨å¥¨ï¼‰
pip install ruff

# æ–¹æ³•2: ä»®æƒ³ç’°å¢ƒã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ï¼‰
# PyCharmã§æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆæ™‚ã«ä»®æƒ³ç’°å¢ƒã‚’ä½œæˆã—ã¦ã„ã‚‹å ´åˆ
pip install ruff

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª
ruff --version
# å‡ºåŠ›ä¾‹: ruff 0.1.9
```

---

### âš™ï¸ åˆæœŸè¨­å®š

#### ã‚¹ãƒ†ãƒƒãƒ—1: è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã« `pyproject.toml` ã‚’ä½œæˆ

```toml
# pyproject.tomlï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆã«é…ç½®ï¼‰

[tool.ruff]
# 1è¡Œã®æœ€å¤§æ–‡å­—æ•°
line-length = 88  # Blackã¨åŒã˜

# Pythonãƒãƒ¼ã‚¸ãƒ§ãƒ³
target-version = "py310"  # Python 3.10

# é™¤å¤–ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
exclude = [
    ".git",
    ".venv",
    "venv",
    "__pycache__",
    "build",
    "dist",
]

# ãƒã‚§ãƒƒã‚¯ã™ã‚‹ãƒ«ãƒ¼ãƒ«
# https://docs.astral.sh/ruff/rules/
select = [
    "E",   # pycodestyle errors
    "W",   # pycodestyle warnings
    "F",   # pyflakes
    "I",   # isort (importé †åº)
    "N",   # pep8-naming (å‘½åè¦å‰‡)
    "UP",  # pyupgrade (å¤ã„æ§‹æ–‡ã®æ¤œå‡º)
    "B",   # flake8-bugbear (ãƒã‚°ã®å…ƒã«ãªã‚‹ã‚³ãƒ¼ãƒ‰)
    "C4",  # flake8-comprehensions (ãƒªã‚¹ãƒˆå†…åŒ…è¡¨è¨˜)
    "SIM", # flake8-simplify (ç°¡æ½”åŒ–)
]

# ç„¡è¦–ã™ã‚‹ãƒ«ãƒ¼ãƒ«
ignore = [
    "E501",  # è¡ŒãŒé•·ã™ãã‚‹ï¼ˆline-lengthã§åˆ¶å¾¡ï¼‰
]

[tool.ruff.format]
# ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ã®è¨­å®š
quote-style = "double"  # ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆä½¿ç”¨
indent-style = "space"  # ã‚¹ãƒšãƒ¼ã‚¹ã§ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆ

[tool.ruff.lint.isort]
# importæ–‡ã®ä¸¦ã³é †
known-first-party = ["myapp"]  # è‡ªåˆ†ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å
```

---

### ğŸš€ PyCharmã§ã®ä½¿ã„æ–¹

#### æ–¹æ³•1: ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‹ã‚‰æ‰‹å‹•å®Ÿè¡Œ

```bash
# PyCharmä¸‹éƒ¨ã®Terminalã‚¿ãƒ–ã§å®Ÿè¡Œ

# â‘  ãƒã‚§ãƒƒã‚¯ã®ã¿ï¼ˆã‚¨ãƒ©ãƒ¼è¡¨ç¤ºï¼‰
ruff check .

# â‘¡ ãƒã‚§ãƒƒã‚¯ï¼‹è‡ªå‹•ä¿®æ­£
ruff check . --fix

# â‘¢ ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆã‚³ãƒ¼ãƒ‰æ•´å½¢ï¼‰
ruff format .

# â‘£ ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿
ruff check your_file.py
ruff format your_file.py

# â‘¤ ã¾ã¨ã‚ã¦å®Ÿè¡Œï¼ˆæ¨å¥¨ï¼‰
ruff check . --fix && ruff format .
```

---

#### æ–¹æ³•2: PyCharmã® External Tool ã¨ã—ã¦è¨­å®š

**PyCharmã«Ruffã‚’çµ±åˆã™ã‚‹æ‰‹é †ï¼š**

1. **è¨­å®šã‚’é–‹ã**
   - `File` â†’ `Settings`ï¼ˆWindows/Linuxï¼‰
   - `PyCharm` â†’ `Preferences`ï¼ˆMacï¼‰

2. **External Toolsã‚’è¿½åŠ **
   - `Tools` â†’ `External Tools` â†’ `+`ï¼ˆãƒ—ãƒ©ã‚¹ãƒœã‚¿ãƒ³ï¼‰

3. **Ruff Check ã®è¨­å®š**
   ```
   Name: Ruff Check
   Program: ruff
   Arguments: check $FilePath$ --fix
   Working directory: $ProjectFileDir$
   ```

4. **Ruff Format ã®è¨­å®š**
   ```
   Name: Ruff Format
   Program: ruff
   Arguments: format $FilePath$
   Working directory: $ProjectFileDir$
   ```

5. **ä½¿ã„æ–¹**
   - ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å³ã‚¯ãƒªãƒƒã‚¯ â†’ `External Tools` â†’ `Ruff Check`
   - ã¾ãŸã¯: `Tools` ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰å®Ÿè¡Œ

---

#### æ–¹æ³•3: File Watcher ã§è‡ªå‹•å®Ÿè¡Œï¼ˆä¿å­˜æ™‚ã«è‡ªå‹•æ•´å½¢ï¼‰

1. **File Watchersãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’æœ‰åŠ¹åŒ–**
   - `Settings` â†’ `Plugins` â†’ `File Watchers`ï¼ˆé€šå¸¸ã¯æ¨™æº–ã§æœ‰åŠ¹ï¼‰

2. **File Watcherã‚’è¿½åŠ **
   - `Settings` â†’ `Tools` â†’ `File Watchers` â†’ `+`

3. **Ruff Format Watcher ã®è¨­å®š**
   ```
   Name: Ruff Format
   File type: Python
   Scope: Project Files
   Program: ruff
   Arguments: format $FilePath$
   Output paths to refresh: $FilePath$
   Working directory: $ProjectFileDir$
   
   â˜‘ Auto-save edited files to trigger the watcherï¼ˆä¿å­˜æ™‚ã«è‡ªå‹•å®Ÿè¡Œï¼‰
   ```

4. **ä¿å­˜æ™‚ã«è‡ªå‹•æ•´å½¢**
   - ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜ï¼ˆCtrl+S / Cmd+Sï¼‰ã™ã‚‹ã¨è‡ªå‹•ã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

---

### ğŸ“Š Ruffã®å‡ºåŠ›ä¾‹

```bash
# ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§å®Ÿè¡Œ
$ ruff check .

# å‡ºåŠ›ä¾‹
daifuku_shop.py:10:5: F841 Local variable `pric` is assigned to but never used
daifuku_shop.py:15:1: E302 Expected 2 blank lines, found 1
daifuku_shop.py:20:80: E501 Line too long (95 > 88 characters)
daifuku_shop.py:25:1: I001 Import block is un-sorted or un-formatted

Found 4 errors.
[*] 2 fixable with the `--fix` option.
```

**ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã®èª­ã¿æ–¹ï¼š**
- `F841` â†’ pyflakes: æœªä½¿ç”¨å¤‰æ•°
- `E302` â†’ pycodestyle: ç©ºè¡ŒãŒè¶³ã‚Šãªã„
- `E501` â†’ pycodestyle: è¡ŒãŒé•·ã™ãã‚‹
- `I001` â†’ isort: importæ–‡ã®é †åºãŒä¸æ­£

---

## 4. Blackï¼ˆè‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ï¼‰

### ğŸ“– Blackã¨ã¯ï¼Ÿ

**ã€Œå¦¥å”ã—ãªã„ã€Pythonã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿**

- ã‚¹ã‚¿ã‚¤ãƒ«ã®è­°è«–ã‚’çµ‚ã‚ã‚‰ã›ã‚‹ï¼ˆè¨­å®šé …ç›®ãŒã»ã¼ãªã„ï¼‰
- Googleã€Facebookã€Dropboxãªã©ãŒæ¡ç”¨
- Ruffã¨ä½µç”¨å¯èƒ½

---

### ğŸ’» ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# PyCharmã®Terminalã§å®Ÿè¡Œ
pip install black

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª
black --version
# å‡ºåŠ›ä¾‹: black, 24.1.0
```

---

### âš™ï¸ åˆæœŸè¨­å®š

#### pyproject.toml ã«è¿½åŠ 

```toml
# pyproject.toml

[tool.black]
line-length = 88  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ88æ–‡å­—
target-version = ['py310']  # Python 3.10
include = '\.pyi?$'  # .pyã¨.pyiãƒ•ã‚¡ã‚¤ãƒ«
extend-exclude = '''
/(
  # é™¤å¤–ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
  \.git
  | \.venv
  | venv
  | build
  | dist
)/
'''
```

---

### ğŸš€ PyCharmã§ã®ä½¿ã„æ–¹

#### æ–¹æ³•1: ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‹ã‚‰å®Ÿè¡Œ

```bash
# â‘  ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
black .

# â‘¡ ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿
black your_file.py

# â‘¢ ãƒã‚§ãƒƒã‚¯ã®ã¿ï¼ˆå¤‰æ›´ã—ãªã„ï¼‰
black --check .

# â‘£ å·®åˆ†ã‚’è¡¨ç¤º
black --diff your_file.py

# â‘¤ 1è¡Œã®é•·ã•ã‚’å¤‰æ›´
black --line-length 100 your_file.py
```

---

#### æ–¹æ³•2: PyCharmã® External Tool ã¨ã—ã¦è¨­å®š

1. **Settings â†’ Tools â†’ External Tools â†’ +**

2. **Black ã®è¨­å®š**
   ```
   Name: Black
   Program: black
   Arguments: $FilePath$
   Working directory: $ProjectFileDir$
   ```

3. **ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‚­ãƒ¼ã®è¨­å®šï¼ˆä»»æ„ï¼‰**
   - `Settings` â†’ `Keymap`
   - `External Tools` â†’ `Black` ã‚’æ¤œç´¢
   - å³ã‚¯ãƒªãƒƒã‚¯ â†’ `Add Keyboard Shortcut`
   - ä¾‹: `Ctrl+Alt+L`ï¼ˆæ—¢å­˜ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¨åŒã˜ï¼‰

---

#### æ–¹æ³•3: File Watcher ã§ä¿å­˜æ™‚ã«è‡ªå‹•æ•´å½¢

1. **Settings â†’ Tools â†’ File Watchers â†’ +**

2. **Black Watcher ã®è¨­å®š**
   ```
   Name: Black
   File type: Python
   Scope: Project Files
   Program: black
   Arguments: $FilePath$
   Output paths to refresh: $FilePath$
   Working directory: $ProjectFileDir$
   
   â˜‘ Auto-save edited files to trigger the watcher
   ```

---

### ğŸ“Š Blackã®å‹•ä½œä¾‹

```python
# âŒ ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå‰
def sell_daifuku(quantity,price=150,discount=0):
    total=quantity*price*(1-discount)
    return total

result=sell_daifuku(5,150,0.1)

# âœ… ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå¾Œï¼ˆBlackã‚’å®Ÿè¡Œï¼‰
def sell_daifuku(quantity, price=150, discount=0):
    total = quantity * price * (1 - discount)
    return total


result = sell_daifuku(5, 150, 0.1)
```

---

## 5. mypyï¼ˆå‹ãƒã‚§ãƒƒã‚«ãƒ¼ï¼‰

### ğŸ“– mypyã¨ã¯ï¼Ÿ

**Pythonã®å‹ãƒ’ãƒ³ãƒˆã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ãƒ„ãƒ¼ãƒ«**

- å‹ã®ä¸ä¸€è‡´ã‚’å®Ÿè¡Œå‰ã«æ¤œå‡º
- ãƒã‚°ã‚’æ—©æœŸç™ºè¦‹
- IDEã®è£œå®ŒãŒå¼·åŒ–ã•ã‚Œã‚‹

---

### ğŸ’» ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# PyCharmã®Terminalã§å®Ÿè¡Œ
pip install mypy

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª
mypy --version
# å‡ºåŠ›ä¾‹: mypy 1.8.0
```

---

### âš™ï¸ åˆæœŸè¨­å®š

#### mypy.ini ã¾ãŸã¯ pyproject.toml ã«è¨­å®š

```toml
# pyproject.toml

[tool.mypy]
# Python ãƒãƒ¼ã‚¸ãƒ§ãƒ³
python_version = "3.10"

# å³æ ¼ãƒ¢ãƒ¼ãƒ‰ï¼ˆæ¨å¥¨ï¼‰
warn_return_any = true
warn_unused_configs = true
disallow_untyped_defs = true  # å‹ãƒ’ãƒ³ãƒˆãªã—é–¢æ•°ã‚’ç¦æ­¢
disallow_any_generics = true

# ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
show_error_codes = true
show_column_numbers = true
pretty = true

# é™¤å¤–ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
exclude = [
    'venv/',
    '.venv/',
    'tests/',
]

# ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å‹ã‚¹ã‚¿ãƒ–ãŒãªã„å ´åˆ
# ï¼ˆnumpyãªã©ï¼‰
[[tool.mypy.overrides]]
module = "numpy.*"
ignore_missing_imports = true
```

ã¾ãŸã¯

```ini
# mypy.iniï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã«é…ç½®ï¼‰

[mypy]
python_version = 3.10
warn_return_any = True
warn_unused_configs = True
disallow_untyped_defs = True
show_error_codes = True
pretty = True

[mypy-numpy.*]
ignore_missing_imports = True
```

---

### ğŸš€ PyCharmã§ã®ä½¿ã„æ–¹

#### æ–¹æ³•1: ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‹ã‚‰å®Ÿè¡Œ

```bash
# â‘  ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒã‚§ãƒƒã‚¯
mypy .

# â‘¡ ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿
mypy your_file.py

# â‘¢ è©³ç´°ãªãƒ¬ãƒãƒ¼ãƒˆ
mypy . --show-error-codes --pretty

# â‘£ å‹ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆ
mypy . --html-report ./mypy_report
```

---

#### æ–¹æ³•2: PyCharmã® External Tool ã¨ã—ã¦è¨­å®š

1. **Settings â†’ Tools â†’ External Tools â†’ +**

2. **mypy ã®è¨­å®š**
   ```
   Name: mypy
   Program: mypy
   Arguments: $FilePath$ --show-error-codes --pretty
   Working directory: $ProjectFileDir$
   ```

---

#### æ–¹æ³•3: PyCharmçµ„ã¿è¾¼ã¿ã®å‹ãƒã‚§ãƒƒã‚¯ï¼ˆæ¨å¥¨ï¼‰

PyCharmã«ã¯çµ„ã¿è¾¼ã¿ã®å‹ãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ï¼

1. **è¨­å®šã‚’é–‹ã**
   - `Settings` â†’ `Editor` â†’ `Inspections`

2. **Pythonã®å‹ãƒã‚§ãƒƒã‚¯ã‚’æœ‰åŠ¹åŒ–**
   - `Python` â†’ `Type checker` ã«ãƒã‚§ãƒƒã‚¯

3. **ãƒ¬ãƒ™ãƒ«ã‚’èª¿æ•´**
   ```
   â˜‘ Type checker
     Severity: Warning ã¾ãŸã¯ Error
   ```

4. **ã‚³ãƒ¼ãƒ‰ã‚¨ãƒ‡ã‚£ã‚¿ã§ç¢ºèª**
   - å‹ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚‹ç®‡æ‰€ã«æ³¢ç·šãŒè¡¨ç¤ºã•ã‚Œã‚‹

---

### ğŸ“Š mypyã®å‹•ä½œä¾‹

```python
# å‹ãƒ’ãƒ³ãƒˆä»˜ãã‚³ãƒ¼ãƒ‰
def sell_daifuku(quantity: int, price: int = 150) -> int:
    """å¤§ç¦ã‚’è²©å£²ã™ã‚‹"""
    total = quantity * price
    return total

# âŒ å‹ã‚¨ãƒ©ãƒ¼
result = sell_daifuku("5")  # ã‚¨ãƒ©ãƒ¼ï¼æ–‡å­—åˆ—ã‚’æ¸¡ã—ã¦ã„ã‚‹
# error: Argument 1 to "sell_daifuku" has incompatible type "str"; expected "int"

result2 = sell_daifuku(5, "150")  # ã‚¨ãƒ©ãƒ¼ï¼
# error: Argument 2 to "sell_daifuku" has incompatible type "str"; expected "int"

# âœ… æ­£ã—ã„ä½¿ã„æ–¹
result = sell_daifuku(5)  # OK
result = sell_daifuku(5, 150)  # OK
```

---

## 6. PyCharmçµ±åˆè¨­å®š

### ğŸ¯ æœ€å¼·ã®é–‹ç™ºç’°å¢ƒã‚’ä½œã‚‹

---

### ã‚¹ãƒ†ãƒƒãƒ—1: ã™ã¹ã¦ã®ãƒ„ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# PyCharmã®Terminalã§å®Ÿè¡Œ

# ä¸€æ‹¬ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install ruff black mypy

# requirements.txt ã«è¿½åŠ ã™ã‚‹å ´åˆ
echo "ruff>=0.1.0" >> requirements-dev.txt
echo "black>=24.0.0" >> requirements-dev.txt
echo "mypy>=1.8.0" >> requirements-dev.txt
```

---

### ã‚¹ãƒ†ãƒƒãƒ—2: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
your_project/
â”œâ”€â”€ .git/
â”œâ”€â”€ .venv/               # ä»®æƒ³ç’°å¢ƒ
â”œâ”€â”€ src/                 # ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ daifuku_shop.py
â”œâ”€â”€ tests/               # ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
â”‚   â””â”€â”€ test_daifuku.py
â”œâ”€â”€ pyproject.toml       # ãƒ„ãƒ¼ãƒ«ã®è¨­å®š
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md
```

---

### ã‚¹ãƒ†ãƒƒãƒ—3: pyproject.toml ã®å®Œå…¨ç‰ˆ

```toml
# pyproject.tomlï¼ˆå®Œå…¨ç‰ˆï¼‰

[project]
name = "daifuku-shop"
version = "0.1.0"
description = "å¤§ç¦åº—ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ "
requires-python = ">=3.10"

[tool.ruff]
line-length = 88
target-version = "py310"
exclude = [".git", ".venv", "venv", "__pycache__", "build", "dist"]

select = [
    "E",   # pycodestyle errors
    "W",   # pycodestyle warnings
    "F",   # pyflakes
    "I",   # isort
    "N",   # pep8-naming
    "UP",  # pyupgrade
    "B",   # flake8-bugbear
    "C4",  # flake8-comprehensions
    "SIM", # flake8-simplify
]

ignore = ["E501"]

[tool.ruff.format]
quote-style = "double"
indent-style = "space"

[tool.black]
line-length = 88
target-version = ['py310']

[tool.mypy]
python_version = "3.10"
warn_return_any = true
warn_unused_configs = true
disallow_untyped_defs = true
show_error_codes = true
pretty = true
exclude = ['venv/', '.venv/', 'tests/']
```

---

### ã‚¹ãƒ†ãƒƒãƒ—4: .gitignore ã®è¨­å®š

```gitignore
# .gitignore

# Python
__pycache__/
*.py[cod]
*$py.class
*.so
.Python
build/
dist/
*.egg-info/

# ä»®æƒ³ç’°å¢ƒ
venv/
.venv/
ENV/

# IDE
.idea/
.vscode/
*.swp
*.swo

# mypy
.mypy_cache/
.dmypy.json
dmypy.json

# Ruff
.ruff_cache/

# pytest
.pytest_cache/
```

---

### ã‚¹ãƒ†ãƒƒãƒ—5: Makefile ã¾ãŸã¯ ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆï¼ˆä¾¿åˆ©ï¼‰

#### Makefileï¼ˆLinux/Macï¼‰

```makefile
# Makefile

.PHONY: format check test all

# ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
format:
	black .
	ruff check . --fix
	ruff format .

# ã‚³ãƒ¼ãƒ‰ãƒã‚§ãƒƒã‚¯ï¼ˆã‚¨ãƒ©ãƒ¼æ¤œå‡ºã®ã¿ï¼‰
check:
	ruff check .
	mypy .

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
test:
	pytest

# ã™ã¹ã¦å®Ÿè¡Œ
all: format check test
```

ä½¿ã„æ–¹:
```bash
make format  # ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
make check   # ãƒã‚§ãƒƒã‚¯
make all     # ã™ã¹ã¦å®Ÿè¡Œ
```

---

#### run_checks.shï¼ˆWindowså¯¾å¿œï¼‰

```bash
#!/bin/bash
# run_checks.sh

echo "ğŸ” Ruffã§ã‚³ãƒ¼ãƒ‰ãƒã‚§ãƒƒã‚¯..."
ruff check . --fix

echo "âœ¨ Blackã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ..."
black .

echo "ğŸ“ mypyã§å‹ãƒã‚§ãƒƒã‚¯..."
mypy .

echo "âœ… ã™ã¹ã¦å®Œäº†ï¼"
```

ä½¿ã„æ–¹:
```bash
bash run_checks.sh
```

---

#### run_checks.batï¼ˆWindows ãƒãƒƒãƒãƒ•ã‚¡ã‚¤ãƒ«ï¼‰

```batch
@echo off
REM run_checks.bat

echo ğŸ” Ruffã§ã‚³ãƒ¼ãƒ‰ãƒã‚§ãƒƒã‚¯...
ruff check . --fix

echo âœ¨ Blackã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ...
black .

echo ğŸ“ mypyã§å‹ãƒã‚§ãƒƒã‚¯...
mypy .

echo âœ… ã™ã¹ã¦å®Œäº†ï¼
pause
```

---

### ã‚¹ãƒ†ãƒƒãƒ—6: PyCharmã®è¨­å®šã¾ã¨ã‚

#### A. External Tools è¨­å®šï¼ˆã¾ã¨ã‚ï¼‰

`Settings â†’ Tools â†’ External Tools`

**1. Ruff Check**
```
Name: Ruff Check
Program: ruff
Arguments: check $FilePath$ --fix
Working directory: $ProjectFileDir$
```

**2. Ruff Format**
```
Name: Ruff Format
Program: ruff
Arguments: format $FilePath$
Working directory: $ProjectFileDir$
```

**3. Black**
```
Name: Black
Program: black
Arguments: $FilePath$
Working directory: $ProjectFileDir$
```

**4. mypy**
```
Name: mypy
Program: mypy
Arguments: $FilePath$ --show-error-codes
Working directory: $ProjectFileDir$
```

**5. All Checksï¼ˆã™ã¹ã¦å®Ÿè¡Œï¼‰**
```
Name: All Checks
Program: bashï¼ˆã¾ãŸã¯cmd.exeï¼‰
Arguments: run_checks.shï¼ˆã¾ãŸã¯run_checks.batï¼‰
Working directory: $ProjectFileDir$
```

---

#### B. File Watchers è¨­å®šï¼ˆä¿å­˜æ™‚ã«è‡ªå‹•å®Ÿè¡Œï¼‰

`Settings â†’ Tools â†’ File Watchers`

**Ruff Format Watcher**
```
Name: Ruff Format
File type: Python
Program: ruff
Arguments: format $FilePath$
Working directory: $ProjectFileDir$
â˜‘ Auto-save edited files to trigger the watcher
```

---

#### C. PyCharmçµ„ã¿è¾¼ã¿æ©Ÿèƒ½ã®æ´»ç”¨

1. **ã‚³ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚·ãƒ§ãƒ³**
   - `Settings â†’ Editor â†’ Inspections â†’ Python`
   - ã™ã¹ã¦ã®è­¦å‘Šã‚’æœ‰åŠ¹åŒ–

2. **ä¿å­˜æ™‚ã®è‡ªå‹•ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**
   - `Settings â†’ Tools â†’ Actions on Save`
   - â˜‘ `Reformat code`
   - â˜‘ `Optimize imports`

3. **å‹ãƒ’ãƒ³ãƒˆã®è¡¨ç¤º**
   - `Settings â†’ Editor â†’ Inlay Hints â†’ Python`
   - â˜‘ `Type hints`

---

## 7. å®Ÿè·µï¼šã‚¨ãƒ©ãƒ¼ã‚’ä¿®æ­£ã—ã¦ã¿ã‚ˆã†

### ğŸ° å•é¡Œã®ã‚ã‚‹ã‚³ãƒ¼ãƒ‰

```python
# daifuku_shop.py

import os
from typing import Optional
import sys

class DaifukuShop:
    def __init__(self,owner_name,stock):
        self.owner_name=owner_name
        self.stock=stock
        self.sold=0
    
    def sell(self,quantity,price=150,discount=0):
        if quantity>self.stock:
            return None
        total=quantity*price*(1-discount)
        self.stock-=quantity
        self.sold+=quantity
        return total
    
    def get_stats(self):
        return {'owner':self.owner_name,'stock':self.stock,'sold':self.sold}

shop=DaifukuShop("ã†ã•ã†ã•",20)
result=shop.sell(5)
print(result)
```

---

### ğŸ” Ruffã§ãƒã‚§ãƒƒã‚¯

```bash
$ ruff check daifuku_shop.py

daifuku_shop.py:1:8: F401 `os` imported but unused
daifuku_shop.py:3:8: F401 `sys` imported but unused
daifuku_shop.py:5:1: I001 Import block is un-sorted or un-formatted
daifuku_shop.py:6:5: D100 Missing docstring in public class
daifuku_shop.py:8:26: E231 Missing whitespace after ','
daifuku_shop.py:24:1: E302 Expected 2 blank lines, found 1

Found 6 errors.
[*] 4 fixable with the `--fix` option.
```

**è‡ªå‹•ä¿®æ­£:**
```bash
$ ruff check daifuku_shop.py --fix
Fixed 4 errors
```

---

### âœ¨ Blackã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

```bash
$ black daifuku_shop.py

reformatted daifuku_shop.py
All done! âœ¨ ğŸ° âœ¨
```

---

### ğŸ“ mypyã§å‹ãƒã‚§ãƒƒã‚¯

```bash
$ mypy daifuku_shop.py

daifuku_shop.py:7: error: Function is missing a type annotation  [no-untyped-def]
daifuku_shop.py:12: error: Function is missing a type annotation  [no-untyped-def]
daifuku_shop.py:21: error: Function is missing a return type annotation  [no-untyped-def]

Found 3 errors in 1 file (checked 1 source file)
```

---

### âœ… ä¿®æ­£å¾Œã®ã‚³ãƒ¼ãƒ‰

```python
# daifuku_shop.pyï¼ˆä¿®æ­£å¾Œï¼‰

from typing import Dict, Optional, Any


class DaifukuShop:
    """å¤§ç¦åº—ã‚¯ãƒ©ã‚¹"""

    def __init__(self, owner_name: str, stock: int) -> None:
        """
        å¤§ç¦åº—ã‚’åˆæœŸåŒ–ã™ã‚‹

        Args:
            owner_name: åº—é•·ã®åå‰
            stock: åˆæœŸåœ¨åº«æ•°
        """
        self.owner_name = owner_name
        self.stock = stock
        self.sold = 0

    def sell(
        self, quantity: int, price: int = 150, discount: float = 0
    ) -> Optional[int]:
        """
        å¤§ç¦ã‚’è²©å£²ã™ã‚‹

        Args:
            quantity: è²©å£²å€‹æ•°
            price: å˜ä¾¡
            discount: å‰²å¼•ç‡ï¼ˆ0.0-1.0ï¼‰

        Returns:
            å£²ä¸Šé‡‘é¡ã€‚åœ¨åº«ä¸è¶³ã®å ´åˆã¯None
        """
        if quantity > self.stock:
            return None

        total = int(quantity * price * (1 - discount))
        self.stock -= quantity
        self.sold += quantity
        return total

    def get_stats(self) -> Dict[str, Any]:
        """
        çµ±è¨ˆæƒ…å ±ã‚’å–å¾—ã™ã‚‹

        Returns:
            åº—èˆ—ã®çµ±è¨ˆæƒ…å ±
        """
        return {
            "owner": self.owner_name,
            "stock": self.stock,
            "sold": self.sold,
        }


def main() -> None:
    """ãƒ¡ã‚¤ãƒ³å‡¦ç†"""
    shop = DaifukuShop("ã†ã•ã†ã•", 20)
    result = shop.sell(5)
    print(result)


if __name__ == "__main__":
    main()
```

---

### ğŸ‰ ã™ã¹ã¦ã‚¯ãƒªã‚¢ï¼

```bash
# Ruff
$ ruff check daifuku_shop.py
All checks passed!

# Black
$ black daifuku_shop.py --check
All done! âœ¨ ğŸ° âœ¨
1 file would be left unchanged.

# mypy
$ mypy daifuku_shop.py
Success: no issues found in 1 source file
```

---

## 8. ãƒãƒ¼ãƒ é–‹ç™ºã§ã®è¨­å®š

### ğŸ“‹ ãƒãƒ¼ãƒ å…¨ä½“ã§çµ±ä¸€ã™ã‚‹è¨­å®š

---

### ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒŸãƒƒãƒˆ

```bash
# Gitã«ã‚³ãƒŸãƒƒãƒˆ
git add pyproject.toml
git add .gitignore
git commit -m "Add linting and formatting configuration"
git push
```

---

### ã‚¹ãƒ†ãƒƒãƒ—2: pre-commit ãƒ•ãƒƒã‚¯ã®è¨­å®šï¼ˆã‚³ãƒŸãƒƒãƒˆå‰ã«è‡ªå‹•ãƒã‚§ãƒƒã‚¯ï¼‰

```bash
# pre-commitã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install pre-commit

# .pre-commit-config.yaml ã‚’ä½œæˆ
```

```.yaml
# .pre-commit-config.yaml

repos:
  # Ruff
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.1.9
    hooks:
      - id: ruff
        args: [--fix]
      - id: ruff-format

  # mypy
  - repo: https://github.com/pre-commit/mirrors-mypy
    rev: v1.8.0
    hooks:
      - id: mypy
        additional_dependencies: [types-all]
```

```bash
# pre-commitãƒ•ãƒƒã‚¯ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pre-commit install

# æ‰‹å‹•ã§å®Ÿè¡Œã—ã¦ãƒ†ã‚¹ãƒˆ
pre-commit run --all-files
```

**ã“ã‚Œã§ã€`git commit` ã™ã‚‹å‰ã«è‡ªå‹•ãƒã‚§ãƒƒã‚¯ãŒèµ°ã‚‹ï¼**

---

### ã‚¹ãƒ†ãƒƒãƒ—3: GitHub Actions ã§ CI/CD

```.yaml
# .github
