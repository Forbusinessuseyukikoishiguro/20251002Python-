# ==========================================================
# Pythonç¶™æ‰¿ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å®Œå…¨ã‚¬ã‚¤ãƒ‰
# ==========================================================

"""
ã€ã‚ˆãã‚ã‚‹ç¶™æ‰¿ã®ãƒˆãƒ©ãƒ–ãƒ«ã€‘

1. super()ã‚’ä½¿ã‚ãªã„ï¼ˆè¦ªã®åˆæœŸåŒ–å¿˜ã‚Œï¼‰
2. ãƒ¡ã‚½ãƒƒãƒ‰ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ãƒŸã‚¹
3. å¤šé‡ç¶™æ‰¿ã®é †åºå•é¡Œï¼ˆMROï¼‰
4. è¦ªã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã›ãªã„
5. AttributeErrorï¼ˆå±æ€§ãŒè¦‹ã¤ã‹ã‚‰ãªã„ï¼‰
6. isinstance() vs type()
7. æŠ½è±¡ã‚¯ãƒ©ã‚¹ã®å®Ÿè£…å¿˜ã‚Œ
8. ã‚¯ãƒ©ã‚¹å¤‰æ•°ã¨ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°ã®æ··åŒ
9. ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆå±æ€§ã®ç¶™æ‰¿å•é¡Œ
10. å¾ªç’°å‚ç…§
"""

print("=" * 70)
print("Pythonç¶™æ‰¿ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å®Œå…¨ã‚¬ã‚¤ãƒ‰")
print("=" * 70)

# ==========================================================
# ã€1ã€‘super()ã‚’ä½¿ã‚ãªã„ - æœ€é »å‡ºï¼
# ==========================================================

print("\n" + "=" * 70)
print("ã€ãƒˆãƒ©ãƒ–ãƒ«1ã€‘super()ã‚’ä½¿ã‚ãªã„ï¼ˆè¦ªã®åˆæœŸåŒ–å¿˜ã‚Œï¼‰")
print("=" * 70)

trouble1 = """
â–  å•é¡Œï¼šè¦ªã‚¯ãƒ©ã‚¹ã®__init__ãŒå‘¼ã°ã‚Œãªã„
-----------------------------------------------------------
# âŒ é–“é•ã„
class Animal:
    def __init__(self, name):
        self.name = name
        self.energy = 100

class Dog(Animal):
    def __init__(self, name, breed):
        # super()ã‚’å‘¼ã‚“ã§ã„ãªã„ï¼
        self.breed = breed

dog = Dog("ãƒãƒ", "æŸ´çŠ¬")
print(dog.breed)   # OK
print(dog.name)    # AttributeError! nameãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ãªã„
print(dog.energy)  # AttributeError! energyãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ãªã„
-----------------------------------------------------------

â–  è§£æ±ºæ–¹æ³•ï¼šå¿…ãšsuper().__init__()ã‚’å‘¼ã¶
-----------------------------------------------------------
# âœ… æ­£ã—ã„
class Animal:
    def __init__(self, name):
        self.name = name
        self.energy = 100
        print("AnimalãŒåˆæœŸåŒ–ã•ã‚Œã¾ã—ãŸ")

class Dog(Animal):
    def __init__(self, name, breed):
        super().__init__(name)  # è¦ªã®åˆæœŸåŒ–ã‚’å‘¼ã¶ï¼ˆå¿…é ˆï¼ï¼‰
        self.breed = breed
        print("DogãŒåˆæœŸåŒ–ã•ã‚Œã¾ã—ãŸ")

dog = Dog("ãƒãƒ", "æŸ´çŠ¬")
print(f"åå‰: {dog.name}")      # ãƒãƒ
print(f"çŠ¬ç¨®: {dog.breed}")     # æŸ´çŠ¬
print(f"ã‚¨ãƒãƒ«ã‚®ãƒ¼: {dog.energy}")  # 100
-----------------------------------------------------------

â–  super()ã®æ­£ã—ã„ä½¿ã„æ–¹
-----------------------------------------------------------
# ãƒ‘ã‚¿ãƒ¼ãƒ³1ï¼šåŸºæœ¬å½¢
class Child(Parent):
    def __init__(self, param1, param2):
        super().__init__(param1)  # è¦ªã«å¿…è¦ãªå¼•æ•°ã‚’æ¸¡ã™
        self.child_param = param2  # å­ç‹¬è‡ªã®åˆæœŸåŒ–

# ãƒ‘ã‚¿ãƒ¼ãƒ³2ï¼šè¤‡æ•°ã®å¼•æ•°
class Child(Parent):
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)  # å…¨ã¦è¦ªã«æ¸¡ã™
        # å­ç‹¬è‡ªã®å‡¦ç†

# ãƒ‘ã‚¿ãƒ¼ãƒ³3ï¼šè¦ªã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æ‹¡å¼µ
class Child(Parent):
    def method(self):
        super().method()  # è¦ªã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œ
        # è¿½åŠ ã®å‡¦ç†
        print("å­ã‚¯ãƒ©ã‚¹ã®è¿½åŠ å‡¦ç†")
-----------------------------------------------------------

â–  ã‚ˆãã‚ã‚‹é–“é•ã„ãƒ‘ã‚¿ãƒ¼ãƒ³
-----------------------------------------------------------
# âŒ é–“é•ã„1ï¼šsuper()ã‚’å¿˜ã‚Œã‚‹
class Dog(Animal):
    def __init__(self, breed):
        self.breed = breed
        # super().__init__()ã‚’å¿˜ã‚Œã¦ã„ã‚‹

# âŒ é–“é•ã„2ï¼šå¼•æ•°ã‚’é–“é•ãˆã‚‹
class Dog(Animal):
    def __init__(self, name, breed):
        super().__init__()  # nameã‚’æ¸¡ã—ã¦ã„ãªã„ï¼
        self.breed = breed

# âŒ é–“é•ã„3ï¼šé †åºãŒé€†
class Dog(Animal):
    def __init__(self, name, breed):
        self.breed = breed  # å…ˆã«å­ã®åˆæœŸåŒ–
        super().__init__(name)  # å¾Œã‹ã‚‰è¦ª
        # ã“ã‚Œã¯å‹•ããŒã€è¦ªãŒå­ã®å±æ€§ã‚’ä½¿ã†å ´åˆã«å•é¡Œ

# âœ… æ­£ã—ã„é †åºï¼ˆæ¨å¥¨ï¼‰
class Dog(Animal):
    def __init__(self, name, breed):
        super().__init__(name)  # å…ˆã«è¦ªã‚’åˆæœŸåŒ–
        self.breed = breed      # ãã®å¾Œã€å­ã‚’åˆæœŸåŒ–
-----------------------------------------------------------
"""

print(trouble1)

# å®Ÿéš›ã«å‹•ä½œä¾‹
print("\nâ–  å‹•ä½œä¾‹ï¼šsuper()ã®æœ‰ç„¡")

class Animal:
    def __init__(self, name):
        self.name = name
        self.energy = 100

# é–“é•ã£ãŸä¾‹
class BadDog(Animal):
    def __init__(self, name, breed):
        # super()ãªã—
        self.breed = breed

# æ­£ã—ã„ä¾‹
class GoodDog(Animal):
    def __init__(self, name, breed):
        super().__init__(name)
        self.breed = breed

print("ã€é–“é•ã£ãŸä¾‹ã€‘")
try:
    bad_dog = BadDog("ãƒãƒ", "æŸ´çŠ¬")
    print(f"åå‰: {bad_dog.name}")  # ã‚¨ãƒ©ãƒ¼ï¼
except AttributeError as e:
    print(f"âŒ ã‚¨ãƒ©ãƒ¼: {e}")

print("\nã€æ­£ã—ã„ä¾‹ã€‘")
good_dog = GoodDog("ã‚¿ãƒ­ãƒ¼", "ç§‹ç”°çŠ¬")
print(f"âœ… åå‰: {good_dog.name}")
print(f"âœ… çŠ¬ç¨®: {good_dog.breed}")
print(f"âœ… ã‚¨ãƒãƒ«ã‚®ãƒ¼: {good_dog.energy}")

# ==========================================================
# ã€2ã€‘ãƒ¡ã‚½ãƒƒãƒ‰ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ãƒŸã‚¹
# ==========================================================

print("\n" + "=" * 70)
print("ã€ãƒˆãƒ©ãƒ–ãƒ«2ã€‘ãƒ¡ã‚½ãƒƒãƒ‰ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ãƒŸã‚¹")
print("=" * 70)

trouble2 = """
â–  å•é¡Œï¼šãƒ¡ã‚½ãƒƒãƒ‰åã®ã‚¹ãƒšãƒ«ãƒŸã‚¹ã§ä¸Šæ›¸ãã•ã‚Œãªã„
-----------------------------------------------------------
# âŒ é–“é•ã„
class Animal:
    def speak(self):
        return "ä½•ã‹éŸ³ã‚’å‡ºã™"

class Dog(Animal):
    def speak(self):  # speakã‚’ä¸Šæ›¸ã
        return "ãƒ¯ãƒ³ãƒ¯ãƒ³"

class Cat(Animal):
    def speek(self):  # ã‚¹ãƒšãƒ«ãƒŸã‚¹ï¼speak ã˜ã‚ƒãªã„
        return "ãƒ‹ãƒ£ãƒ¼"

dog = Dog()
cat = Cat()
print(dog.speak())  # ãƒ¯ãƒ³ãƒ¯ãƒ³ï¼ˆOKï¼‰
print(cat.speak())  # ä½•ã‹éŸ³ã‚’å‡ºã™ï¼ˆè¦ªã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒå‘¼ã°ã‚Œã‚‹ï¼‰
print(cat.speek())  # ãƒ‹ãƒ£ãƒ¼ï¼ˆæ–°ã—ã„ãƒ¡ã‚½ãƒƒãƒ‰ã«ãªã£ã¦ã‚‹ï¼‰
-----------------------------------------------------------

â–  è§£æ±ºæ–¹æ³•1ï¼šãƒ¡ã‚½ãƒƒãƒ‰åã‚’ç¢ºèª
-----------------------------------------------------------
# âœ… æ­£ã—ã„
class Cat(Animal):
    def speak(self):  # æ­£ã—ã„ã‚¹ãƒšãƒ«
        return "ãƒ‹ãƒ£ãƒ¼"

cat = Cat()
print(cat.speak())  # ãƒ‹ãƒ£ãƒ¼
-----------------------------------------------------------

â–  è§£æ±ºæ–¹æ³•2ï¼šè¦ªã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™
-----------------------------------------------------------
class Animal:
    def speak(self):
        return "éŸ³"
    
    def describe(self):
        return f"{self.name}ãŒ{self.speak()}"

class Dog(Animal):
    def __init__(self, name):
        self.name = name
    
    def speak(self):
        return "ãƒ¯ãƒ³ãƒ¯ãƒ³"
    
    # describeã¯è¦ªã®ã‚‚ã®ã‚’ä½¿ã†ï¼ˆã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã—ãªã„ï¼‰

dog = Dog("ãƒãƒ")
print(dog.describe())  # ãƒãƒãŒãƒ¯ãƒ³ãƒ¯ãƒ³
-----------------------------------------------------------

â–  è§£æ±ºæ–¹æ³•3ï¼šè¦ªã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æ‹¡å¼µ
-----------------------------------------------------------
class Animal:
    def move(self):
        print("ç§»å‹•ã™ã‚‹")

class Bird(Animal):
    def move(self):
        super().move()  # è¦ªã®moveã‚’å®Ÿè¡Œ
        print("ãã—ã¦é£›ã¶")  # è¿½åŠ ã®å‹•ä½œ

bird = Bird()
bird.move()
# å‡ºåŠ›ï¼š
# ç§»å‹•ã™ã‚‹
# ãã—ã¦é£›ã¶
-----------------------------------------------------------

â–  ã‚ˆãã‚ã‚‹é–“é•ã„ï¼šå®Œå…¨ã«ä¸Šæ›¸ãã—ã¦è¦ªã‚’å‘¼ã°ãªã„
-----------------------------------------------------------
class Animal:
    def __init__(self, name):
        self.name = name
        self.energy = 100
        self.health = 100

class Dog(Animal):
    def __init__(self, name, breed):
        # âŒ è¦ªã‚’å‘¼ã°ãšã«å…¨éƒ¨è‡ªåˆ†ã§æ›¸ã
        self.name = name
        self.breed = breed
        # energyã¨healthã®åˆæœŸåŒ–ã‚’å¿˜ã‚Œã¦ã„ã‚‹

# âœ… æ­£ã—ã„æ–¹æ³•
class Dog(Animal):
    def __init__(self, name, breed):
        super().__init__(name)  # è¦ªã«ä»»ã›ã‚‹
        self.breed = breed  # å­ç‹¬è‡ªã®ã‚‚ã®ã ã‘è¿½åŠ 
-----------------------------------------------------------
"""

print(trouble2)

# å®Ÿéš›ã«å‹•ä½œä¾‹
print("\nâ–  å‹•ä½œä¾‹ï¼šã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰")

class Animal:
    def speak(self):
        return "..."
    
    def introduce(self):
        return f"å‹•ç‰©ã§ã™ã€‚{self.speak()}"

class Cat(Animal):
    def speak(self):
        return "ãƒ‹ãƒ£ãƒ¼"

class Dog(Animal):
    def speak(self):
        return "ãƒ¯ãƒ³ãƒ¯ãƒ³"
    
    def introduce(self):
        # è¦ªã®introduceã‚’æ‹¡å¼µ
        parent_intro = super().introduce()
        return f"{parent_intro}ï¼ˆçŠ¬ã§ã™ï¼‰"

cat = Cat()
dog = Dog()

print(f"çŒ«: {cat.introduce()}")  # å‹•ç‰©ã§ã™ã€‚ãƒ‹ãƒ£ãƒ¼
print(f"çŠ¬: {dog.introduce()}")  # å‹•ç‰©ã§ã™ã€‚ãƒ¯ãƒ³ãƒ¯ãƒ³ï¼ˆçŠ¬ã§ã™ï¼‰

# ==========================================================
# ã€3ã€‘å¤šé‡ç¶™æ‰¿ã®é †åºå•é¡Œï¼ˆMROï¼‰
# ==========================================================

print("\n" + "=" * 70)
print("ã€ãƒˆãƒ©ãƒ–ãƒ«3ã€‘å¤šé‡ç¶™æ‰¿ã®é †åºå•é¡Œï¼ˆMROï¼‰")
print("=" * 70)

trouble3 = """
â–  å•é¡Œï¼šè¤‡æ•°ã®è¦ªã‚¯ãƒ©ã‚¹ãŒã‚ã‚‹æ™‚ã€ã©ã‚ŒãŒå‘¼ã°ã‚Œã‚‹ï¼Ÿ
-----------------------------------------------------------
class A:
    def method(self):
        print("Aã®ãƒ¡ã‚½ãƒƒãƒ‰")

class B:
    def method(self):
        print("Bã®ãƒ¡ã‚½ãƒƒãƒ‰")

class C(A, B):  # Aã¨Bã‚’ä¸¡æ–¹ç¶™æ‰¿
    pass

c = C()
c.method()  # ã©ã¡ã‚‰ãŒå‘¼ã°ã‚Œã‚‹ï¼Ÿ
# ç­”ãˆï¼šAã®ãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆå·¦ã‹ã‚‰é †ã«æ¢ç´¢ï¼‰
-----------------------------------------------------------

â–  MROï¼ˆMethod Resolution Orderï¼‰ã¨ã¯
-----------------------------------------------------------
# ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æ¢ã™é †åºã®ã“ã¨
# å·¦ã‹ã‚‰å³ã€æ·±ã•å„ªå…ˆã§æ¢ç´¢

class C(A, B):
    pass

# MROã‚’ç¢ºèª
print(C.__mro__)
# (<class 'C'>, <class 'A'>, <class 'B'>, <class 'object'>)

# ã¾ãŸã¯
print(C.mro())
-----------------------------------------------------------

â–  ã‚ˆãã‚ã‚‹å•é¡Œï¼šãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰ç¶™æ‰¿
-----------------------------------------------------------
class Animal:
    def __init__(self):
        print("AnimalåˆæœŸåŒ–")
        self.species = "å‹•ç‰©"

class Mammal(Animal):
    def __init__(self):
        super().__init__()
        print("MammalåˆæœŸåŒ–")
        self.warm_blooded = True

class Carnivore(Animal):
    def __init__(self):
        super().__init__()
        print("CarnivoreåˆæœŸåŒ–")
        self.eats_meat = True

class Dog(Mammal, Carnivore):
    def __init__(self):
        super().__init__()
        print("DogåˆæœŸåŒ–")

# MROã‚’ç¢ºèª
print(Dog.mro())
# [Dog, Mammal, Carnivore, Animal, object]

dog = Dog()
# å‡ºåŠ›é †ï¼š
# AnimalåˆæœŸåŒ–
# CarnivoreåˆæœŸåŒ–
# MammalåˆæœŸåŒ–
# DogåˆæœŸåŒ–
-----------------------------------------------------------

â–  è§£æ±ºæ–¹æ³•ï¼šå¤šé‡ç¶™æ‰¿ã‚’é¿ã‘ã‚‹ï¼ˆæ¨å¥¨ï¼‰
-----------------------------------------------------------
# æ–¹æ³•1ï¼šã‚³ãƒ³ãƒã‚¸ã‚·ãƒ§ãƒ³ï¼ˆçµ„ã¿åˆã‚ã›ï¼‰ã‚’ä½¿ã†
class Engine:
    def start(self):
        print("ã‚¨ãƒ³ã‚¸ãƒ³å§‹å‹•")

class Wings:
    def fly(self):
        print("é£›ã¶")

class Airplane:
    def __init__(self):
        self.engine = Engine()  # ç¶™æ‰¿ã§ã¯ãªãä¿æŒ
        self.wings = Wings()
    
    def takeoff(self):
        self.engine.start()
        self.wings.fly()

# æ–¹æ³•2ï¼šãƒŸãƒƒã‚¯ã‚¹ã‚¤ãƒ³ï¼ˆæ©Ÿèƒ½è¿½åŠ ç”¨ï¼‰
class LoggerMixin:
    def log(self, message):
        print(f"[LOG] {message}")

class TimestampMixin:
    def get_timestamp(self):
        from datetime import datetime
        return datetime.now()

class User(LoggerMixin, TimestampMixin):
    def __init__(self, name):
        self.name = name
    
    def login(self):
        self.log(f"{self.name}ãŒãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã—ãŸ")
        print(f"æ™‚åˆ»: {self.get_timestamp()}")
-----------------------------------------------------------
"""

print(trouble3)

# å®Ÿéš›ã«å‹•ä½œä¾‹
print("\nâ–  å‹•ä½œä¾‹ï¼šMROç¢ºèª")

class A:
    def method(self):
        return "A"

class B:
    def method(self):
        return "B"

class C(A, B):
    pass

class D(B, A):
    pass

c = C()
d = D()

print(f"C.method(): {c.method()}")  # Aï¼ˆå·¦ã‹ã‚‰å„ªå…ˆï¼‰
print(f"D.method(): {d.method()}")  # Bï¼ˆå·¦ã‹ã‚‰å„ªå…ˆï¼‰
print(f"\nCã®MRO: {[cls.__name__ for cls in C.mro()]}")
print(f"Dã®MRO: {[cls.__name__ for cls in D.mro()]}")

# ==========================================================
# ã€4ã€‘è¦ªã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã›ãªã„
# ==========================================================

print("\n" + "=" * 70)
print("ã€ãƒˆãƒ©ãƒ–ãƒ«4ã€‘è¦ªã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã›ãªã„")
print("=" * 70)

trouble4 = """
â–  å•é¡Œï¼šè¦ªã‚¯ãƒ©ã‚¹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„
-----------------------------------------------------------
# âŒ é–“é•ã„
class Parent:
    def greet(self):
        return "ã“ã‚“ã«ã¡ã¯"

class Child(Parent):
    def greet(self):
        return "ã‚„ã‚"
    
    def formal_greet(self):
        # è¦ªã®greetã‚’å‘¼ã³ãŸã„
        return Parent.greet()  # ã‚¨ãƒ©ãƒ¼ï¼selfãŒãªã„

child = Child()
print(child.formal_greet())  # TypeError
-----------------------------------------------------------

â–  è§£æ±ºæ–¹æ³•1ï¼šsuper()ã‚’ä½¿ã†ï¼ˆæ¨å¥¨ï¼‰
-----------------------------------------------------------
class Parent:
    def greet(self):
        return "ã“ã‚“ã«ã¡ã¯"

class Child(Parent):
    def greet(self):
        return "ã‚„ã‚"
    
    def formal_greet(self):
        return super().greet()  # è¦ªã®greetã‚’å‘¼ã¶

child = Child()
print(child.formal_greet())  # ã“ã‚“ã«ã¡ã¯
-----------------------------------------------------------

â–  è§£æ±ºæ–¹æ³•2ï¼šã‚¯ãƒ©ã‚¹åã‚’æ˜ç¤ºï¼ˆéæ¨å¥¨ã ãŒå¯èƒ½ï¼‰
-----------------------------------------------------------
class Parent:
    def greet(self):
        return "ã“ã‚“ã«ã¡ã¯"

class Child(Parent):
    def greet(self):
        return "ã‚„ã‚"
    
    def formal_greet(self):
        return Parent.greet(self)  # selfã‚’æ˜ç¤ºçš„ã«æ¸¡ã™

child = Child()
print(child.formal_greet())  # ã“ã‚“ã«ã¡ã¯
-----------------------------------------------------------

â–  è§£æ±ºæ–¹æ³•3ï¼šåˆ¥åã‚’ã¤ã‘ã‚‹
-----------------------------------------------------------
class Parent:
    def process(self):
        print("åŸºæœ¬å‡¦ç†")

class Child(Parent):
    def process(self):
        print("æ‹¡å¼µå‡¦ç†")
    
    def base_process(self):
        '''è¦ªã®å‡¦ç†ã‚’åˆ¥åã§å…¬é–‹'''
        super().process()

child = Child()
child.process()       # æ‹¡å¼µå‡¦ç†
child.base_process()  # åŸºæœ¬å‡¦ç†
-----------------------------------------------------------
"""

print(trouble4)

# ==========================================================
# ã€5ã€‘AttributeError - å±æ€§ãŒè¦‹ã¤ã‹ã‚‰ãªã„
# ==========================================================

print("\n" + "=" * 70)
print("ã€ãƒˆãƒ©ãƒ–ãƒ«5ã€‘AttributeError: å±æ€§ãŒè¦‹ã¤ã‹ã‚‰ãªã„")
print("=" * 70)

trouble5 = """
â–  å•é¡Œï¼šå­ã‚¯ãƒ©ã‚¹ã§è¦ªã®å±æ€§ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„
-----------------------------------------------------------
# âŒ é–“é•ã„
class Animal:
    def __init__(self, name):
        self.name = name

class Dog(Animal):
    def __init__(self, breed):
        # super().__init__()ã‚’å‘¼ã‚“ã§ã„ãªã„
        self.breed = breed
    
    def introduce(self):
        return f"{self.name}ã¯{self.breed}ã§ã™"

dog = Dog("æŸ´çŠ¬")
print(dog.introduce())  # AttributeError: 'Dog' has no attribute 'name'
-----------------------------------------------------------

â–  è§£æ±ºæ–¹æ³•ï¼šsuper()ã§è¦ªã‚’åˆæœŸåŒ–
-----------------------------------------------------------
class Animal:
    def __init__(self, name):
        self.name = name

class Dog(Animal):
    def __init__(self, name, breed):
        super().__init__(name)  # è¦ªã‚’åˆæœŸåŒ–
        self.breed = breed
    
    def introduce(self):
        return f"{self.name}ã¯{self.breed}ã§ã™"

dog = Dog("ãƒãƒ", "æŸ´çŠ¬")
print(dog.introduce())  # ãƒãƒã¯æŸ´çŠ¬ã§ã™
-----------------------------------------------------------

â–  ã‚ˆãã‚ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼šæ¡ä»¶ä»˜ãå±æ€§
-----------------------------------------------------------
# âŒ å•é¡Œ
class Animal:
    def __init__(self, name, can_fly=False):
        self.name = name
        if can_fly:
            self.wings = 2  # æ¡ä»¶ä»˜ãã§è¨­å®š

class Bird(Animal):
    def __init__(self, name):
        super().__init__(name, can_fly=True)
    
    def flap(self):
        return f"{self.wings}æšã®ç¾½ã‚’ç¾½ã°ãŸã‹ã›ã‚‹"

bird = Bird("ã‚¹ã‚ºãƒ¡")
print(bird.flap())  # OK

dog = Animal("ãƒãƒ", can_fly=False)
# print(dog.wings)  # AttributeError

# âœ… è§£æ±ºï¼šhasattr()ã§ãƒã‚§ãƒƒã‚¯
class Animal:
    def __init__(self, name, can_fly=False):
        self.name = name
        if can_fly:
            self.wings = 2
    
    def describe_wings(self):
        if hasattr(self, 'wings'):
            return f"{self.wings}æšã®ç¾½ãŒã‚ã‚Šã¾ã™"
        return "ç¾½ã¯ã‚ã‚Šã¾ã›ã‚“"

bird = Animal("ã‚¹ã‚ºãƒ¡", can_fly=True)
dog = Animal("ãƒãƒ", can_fly=False)
print(bird.describe_wings())  # 2æšã®ç¾½ãŒã‚ã‚Šã¾ã™
print(dog.describe_wings())   # ç¾½ã¯ã‚ã‚Šã¾ã›ã‚“
-----------------------------------------------------------

â–  getattr()ã‚’ä½¿ã£ãŸå®‰å…¨ãªã‚¢ã‚¯ã‚»ã‚¹
-----------------------------------------------------------
class Animal:
    def __init__(self, name):
        self.name = name

animal = Animal("ãƒãƒ")

# å­˜åœ¨ã—ãªã„å±æ€§ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹
age = getattr(animal, 'age', 0)  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤0
print(age)  # 0

# å±æ€§ã‚’è¨­å®š
setattr(animal, 'age', 5)
print(animal.age)  # 5
-----------------------------------------------------------
"""

print(trouble5)

# å®Ÿéš›ã«å‹•ä½œä¾‹
print("\nâ–  å‹•ä½œä¾‹ï¼šå±æ€§ã®å®‰å…¨ãªã‚¢ã‚¯ã‚»ã‚¹")

class Animal:
    def __init__(self, name):
        self.name = name

class Dog(Animal):
    def __init__(self, name, breed):
        super().__init__(name)
        self.breed = breed
    
    def get_info(self):
        # å®‰å…¨ãªå±æ€§ã‚¢ã‚¯ã‚»ã‚¹
        name = getattr(self, 'name', 'åç„¡ã—')
        breed = getattr(self, 'breed', 'ä¸æ˜')
        age = getattr(self, 'age', 'ä¸æ˜')
        return f"{name}ï¼ˆ{breed}ã€å¹´é½¢{age}ï¼‰"

dog = Dog("ãƒãƒ", "æŸ´çŠ¬")
print(dog.get_info())  # ãƒãƒï¼ˆæŸ´çŠ¬ã€å¹´é½¢ä¸æ˜ï¼‰

# å¾Œã‹ã‚‰å±æ€§ã‚’è¿½åŠ 
dog.age = 3
print(dog.get_info())  # ãƒãƒï¼ˆæŸ´çŠ¬ã€å¹´é½¢3ï¼‰

# ==========================================================
# ã€6ã€‘isinstance() vs type()
# ==========================================================

print("\n" + "=" * 70)
print("ã€ãƒˆãƒ©ãƒ–ãƒ«6ã€‘isinstance() vs type()ã®ä½¿ã„åˆ†ã‘")
print("=" * 70)

trouble6 = """
â–  å•é¡Œï¼šå‹ãƒã‚§ãƒƒã‚¯ã®æ–¹æ³•ã‚’é–“é•ãˆã‚‹
-----------------------------------------------------------
class Animal:
    pass

class Dog(Animal):
    pass

dog = Dog()

# type()ã¯å³å¯†ï¼ˆç¶™æ‰¿ã‚’è€ƒæ…®ã—ãªã„ï¼‰
print(type(dog) == Dog)     # True
print(type(dog) == Animal)  # False â† è¦ªã‚¯ãƒ©ã‚¹ã§ã¯False

# isinstance()ã¯ç¶™æ‰¿ã‚’è€ƒæ…®ï¼ˆæ¨å¥¨ï¼‰
print(isinstance(dog, Dog))     # True
print(isinstance(dog, Animal))  # True â† è¦ªã‚¯ãƒ©ã‚¹ã§ã‚‚True
-----------------------------------------------------------

â–  ä½¿ã„åˆ†ã‘
-----------------------------------------------------------
# âœ… isinstance()ã‚’ä½¿ã†ã¹ãå ´åˆï¼ˆã»ã¨ã‚“ã©ï¼‰
def process_animal(obj):
    if isinstance(obj, Animal):  # æ¨å¥¨
        obj.speak()

# âŒ type()ã‚’ä½¿ã†ã¹ãã§ãªã„å ´åˆ
def process_animal(obj):
    if type(obj) == Animal:  # éæ¨å¥¨
        obj.speak()  # å­ã‚¯ãƒ©ã‚¹ãŒå¼¾ã‹ã‚Œã‚‹

# âœ… type()ã‚’ä½¿ã†å ´åˆï¼ˆã¾ã‚Œï¼‰
# å³å¯†ã«ç‰¹å®šã®ã‚¯ãƒ©ã‚¹ã‹ãƒã‚§ãƒƒã‚¯ã—ãŸã„æ™‚
def process_only_dog(obj):
    if type(obj) == Dog:  # çŠ¬ã ã‘ã€å­ã‚¯ãƒ©ã‚¹ã¯é™¤å¤–
        pass
-----------------------------------------------------------

â–  è¤‡æ•°ã®å‹ãƒã‚§ãƒƒã‚¯
-----------------------------------------------------------
# isinstance()ã¯è¤‡æ•°å‹ãƒã‚§ãƒƒã‚¯å¯èƒ½
value = 123
if isinstance(value, (int, float)):  # intã‹floatã‹
    print("æ•°å€¤ã§ã™")

# type()ã§ã¯ä¸å¯
if type(value) in (int, float):  # ã“ã‚Œã¯å‹•ããŒå†—é•·
    print("æ•°å€¤ã§ã™")
-----------------------------------------------------------
"""

print(trouble6)

# å®Ÿéš›ã«å‹•ä½œä¾‹
print("\nâ–  å‹•ä½œä¾‹ï¼šå‹ãƒã‚§ãƒƒã‚¯")

class Animal:
    pass

class Dog(Animal):
    pass

class Cat(Animal):
    pass

dog = Dog()
cat = Cat()

print("ã€isinstance()ã€‘")
print(f"dog is Dog: {isinstance(dog, Dog)}")
print(f"dog is Animal: {isinstance(dog, Animal)}")
print(f"dog is Cat: {isinstance(dog, Cat)}")

print("\nã€type()ã€‘")
print(f"type(dog) == Dog: {type(dog) == Dog}")
print(f"type(dog) == Animal: {type(dog) == Animal}")

# ==========================================================
# ã€7ã€‘ãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆ
# ==========================================================

print("\n" + "=" * 70)
print("ã€ãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆã€‘ç¶™æ‰¿ãƒˆãƒ©ãƒ–ãƒ«è§£æ±ºæ³•")
print("=" * 70)

cheatsheet = """
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ          ç¶™æ‰¿ãƒˆãƒ©ãƒ–ãƒ«è§£æ±ºãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆ                  â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

â–  ãƒˆãƒ©ãƒ–ãƒ«1: è¦ªã®å±æ€§ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åŸå› : super().__init__()ã‚’å‘¼ã‚“ã§ã„ãªã„        â”‚
â”‚ è§£æ±º: å¿…ãšsuper().__init__()ã‚’æœ€åˆã«å‘¼ã¶      â”‚
â”‚                                               â”‚
â”‚ class Child(Parent):                          â”‚
â”‚     def __init__(self, params):               â”‚
â”‚         super().__init__(params)  # å¿…é ˆï¼    â”‚
â”‚         # å­ã®åˆæœŸåŒ–                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â–  ãƒˆãƒ©ãƒ–ãƒ«2: ãƒ¡ã‚½ãƒƒãƒ‰ãŒä¸Šæ›¸ãã•ã‚Œãªã„
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åŸå› : ãƒ¡ã‚½ãƒƒãƒ‰åã®ã‚¹ãƒšãƒ«ãƒŸã‚¹                   â”‚
â”‚ è§£æ±º: æ­£ã—ã„ãƒ¡ã‚½ãƒƒãƒ‰åã‚’ç¢ºèª                   â”‚
â”‚                                               â”‚
â”‚ # âŒ speek â†’ âœ… speak                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â–  ãƒˆãƒ©ãƒ–ãƒ«3: å¤šé‡ç¶™æ‰¿ã§æ··ä¹±
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åŸå› : MROï¼ˆãƒ¡ã‚½ãƒƒãƒ‰è§£æ±ºé †åºï¼‰ã‚’ç†è§£ã—ã¦ã„ãªã„ â”‚
â”‚ è§£æ±º1: print(Class.mro()) ã§ç¢ºèª             â”‚
â”‚ è§£æ±º2: å¤šé‡ç¶™æ‰¿ã‚’é¿ã‘ã‚‹ï¼ˆã‚³ãƒ³ãƒã‚¸ã‚·ãƒ§ãƒ³ä½¿ç”¨ï¼‰ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â–  ãƒˆãƒ©ãƒ–ãƒ«4: è¦ªã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã¹ãªã„
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åŸå› : super()ã‚’ä½¿ã£ã¦ã„ãªã„                   â”‚
â”‚ è§£æ±º: super().method() ã§è¦ªã‚’å‘¼ã¶            â”‚
â”‚                                               â”‚
â”‚ def method(self):                             â”‚
â”‚     super().method()  # è¦ªã‚’å®Ÿè¡Œ              â”‚
â”‚     # è¿½åŠ å‡¦ç†                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â–  ãƒˆãƒ©ãƒ–ãƒ«5: å‹ãƒã‚§ãƒƒã‚¯ãŒå‹•ã‹ãªã„
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åŸå› : type()ã‚’ä½¿ã£ã¦ã„ã‚‹                      â”‚
â”‚ è§£æ±º: isinstance()ã‚’ä½¿ã†ï¼ˆç¶™æ‰¿ã‚’è€ƒæ…®ï¼‰        â”‚
â”‚                                               â”‚
â”‚ # âŒ type(obj) == Parent                      â”‚
â”‚ # âœ… isinstance(obj, Parent)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â–  ç¶™æ‰¿ã®é»„é‡‘ãƒ«ãƒ¼ãƒ«

1. å¿…ãšsuper().__init__()ã‚’å‘¼ã¶
2. è¦ªã‚’å‘¼ã¶æ™‚ã¯super()ã‚’ä½¿ã†
3. å‹ãƒã‚§ãƒƒã‚¯ã¯isinstance()
4. å¤šé‡ç¶™æ‰¿ã¯é¿ã‘ã‚‹
5. MROã‚’ç¢ºèªã™ã‚‹ï¼ˆClass.mro()ï¼‰

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â–  ç¶™æ‰¿ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

â–¡ super().__init__()ã‚’å‘¼ã‚“ã§ã„ã‚‹ã‹ï¼Ÿ
â–¡ ãƒ¡ã‚½ãƒƒãƒ‰åã®ã‚¹ãƒšãƒ«ã¯æ­£ã—ã„ã‹ï¼Ÿ
â–¡ è¦ªã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã¶æ™‚super()ã‚’ä½¿ã£ã¦ã„ã‚‹ã‹ï¼Ÿ
â–¡ isinstance()ã§å‹ãƒã‚§ãƒƒã‚¯ã—ã¦ã„ã‚‹ã‹ï¼Ÿ
â–¡ å¿…è¦ãªå±æ€§ã¯åˆæœŸåŒ–ã•ã‚Œã¦ã„ã‚‹ã‹ï¼Ÿ

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â–  æ­£ã—ã„ç¶™æ‰¿ã®åŸºæœ¬å½¢

class Parent:
    def __init__(self, param1):
        self.param1 = param1
    
    def method(self):
        return "è¦ªã®å‡¦ç†"

class Child(Parent):
    def __init__(self, param1, param2):
        super().__init__(param1)  # è¦ªã‚’åˆæœŸåŒ–
        self.param2 = param2      # å­ã®åˆæœŸåŒ–
    
    def method(self):
        result = super().method()  # è¦ªã‚’å‘¼ã¶
        return f"{result} + å­ã®å‡¦ç†"
"""

print(cheatsheet)

print("\n" + "=" * 70)
print("ã“ã‚Œã§ç¶™æ‰¿ã®ãƒˆãƒ©ãƒ–ãƒ«ã¯è§£æ±ºï¼")
print("=" * 70)

ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼
è¦ªã®ã¾ã¾ï¼

# âœ… è§£æ±º
class Cat(Animal):
    def speak(self):  # æ­£ã—ã„ã‚¹ãƒšãƒ«
        return "ãƒ‹ãƒ£ãƒ¼"

cat = Cat()
print(cat.speak())  # "ãƒ‹ãƒ£ãƒ¼" â† æ­£ã—ãä¸Šæ›¸ã
```

### 3ï¸âƒ£ **è¦ªã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã¹ãªã„**

```python
# âŒ ã‚¨ãƒ©ãƒ¼
class Parent:
    def greet(self):
        return "ã“ã‚“ã«ã¡ã¯"

class Child(Parent):
    def greet(self):
        return "ã‚„ã‚"
    
    def formal_greet(self):
        return Parent.greet()  # ã‚¨ãƒ©ãƒ¼ï¼selfãŒãªã„

# âœ… è§£æ±º
class Child(Parent):
    def greet(self):
        return "ã‚„ã‚"
    
    def formal_greet(self):
        return super().greet()  # super()ã‚’ä½¿ã†

child = Child()
print(child.formal_greet())  # ã“ã‚“ã«ã¡ã¯
```

### 4ï¸âƒ£ **type() vs isinstance()**

```python
class Animal:
    pass

class Dog(Animal):
    pass

dog = Dog()

# âŒ é–“é•ã„ï¼ˆç¶™æ‰¿ã‚’è€ƒæ…®ã—ãªã„ï¼‰
print(type(dog) == Animal)  # False

# âœ… æ­£ã—ã„ï¼ˆç¶™æ‰¿ã‚’è€ƒæ…®ï¼‰
print(isinstance(dog, Animal))  # True
print(isinstance(dog, Dog))     # True
```

### 5ï¸âƒ£ **AttributeError**

```python
# âŒ ã‚¨ãƒ©ãƒ¼
class Animal:
    def __init__(self, name):
        self.name = name

class Dog(Animal):
    def __init__(self, breed):
        self.breed = breed  # super()ãªã—
    
    def introduce(self):
        return f"{self.name}ã§ã™"  # nameãŒãªã„ï¼

# âœ… è§£æ±º
class Dog(Animal):
    def __init__(self, name, breed):
        super().__init__(name)  # è¦ªã‚’åˆæœŸåŒ–
        self.breed = breed
    
    def introduce(self):
        return f"{self.name}ã§ã™"

dog = Dog("ãƒãƒ", "æŸ´çŠ¬")
print(dog.introduce())  # ãƒãƒã§ã™
```

## ğŸ“‹ ç¶™æ‰¿ã®åŸºæœ¬ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

```python
# ===== åŸºæœ¬å½¢ =====
class Parent:
    def __init__(self, param1):
        self.param1 = param1
    
    def method(self):
        return "è¦ªã®å‡¦ç†"

class Child(Parent):
    def __init__(self, param1, param2):
        super().__init__(param1)  # â‘  è¦ªã‚’åˆæœŸåŒ–
        self.param2 = param2      # â‘¡ å­ã®åˆæœŸåŒ–
    
    def method(self):
        result = super().method()  # â‘¢ è¦ªã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã¶
        return f"{result} + å­ã®å‡¦ç†"

# ===== ä½¿ç”¨ =====
child = Child("å€¤1", "å€¤2")
print(child.method())
```

## ğŸ” ãƒ‡ãƒãƒƒã‚°ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯

### 1. MROï¼ˆãƒ¡ã‚½ãƒƒãƒ‰è§£æ±ºé †åºï¼‰ç¢ºèª

```python
class A:
    pass

class B(A):
    pass

class C(A):
    pass

class D(B, C):
    pass

# MROã‚’ç¢ºèª
print(D.mro())
# [D, B, C, A, object]

# ã‚ã‹ã‚Šã‚„ã™ãè¡¨ç¤º
for cls in D.mro():
    print(cls.__name__)
# D
# B
# C
# A
# object
```

### 2. å±æ€§ã®å­˜åœ¨ç¢ºèª

```python
class Animal:
    def __init__(self, name):
        self.name = name

dog = Animal("ãƒãƒ")

# æ–¹æ³•1: hasattr()
if hasattr(dog, 'name'):
    print(dog.name)

if hasattr(dog, 'age'):
    print(dog.age)
else:
    print("ageãŒã‚ã‚Šã¾ã›ã‚“")

# æ–¹æ³•2: getattr()ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ä»˜ãï¼‰
name = getattr(dog, 'name', 'åç„¡ã—')
age = getattr(dog, 'age', 0)
print(f"{name}ã€å¹´é½¢{age}")

# æ–¹æ³•3: __dict__ã§å…¨å±æ€§ç¢ºèª
print(dog.__dict__)  # {'name': 'ãƒãƒ'}
```

### 3. ç¶™æ‰¿ãƒã‚§ãƒ¼ãƒ³ç¢ºèª

```python
class Animal:
    pass

class Mammal(Animal):
    pass

class Dog(Mammal):
    pass

dog = Dog()

# è¦ªã‚¯ãƒ©ã‚¹ã‚’ã™ã¹ã¦ç¢ºèª
print(Dog.__bases__)  # (<class '__main__.Mammal'>,)
print(Mammal.__bases__)  # (<class '__main__.Animal'>,)

# isinstance()ã§ç¢ºèª
print(isinstance(dog, Dog))     # True
print(isinstance(dog, Mammal))  # True
print(isinstance(dog, Animal))  # True
print(isinstance(dog, object))  # Trueï¼ˆã™ã¹ã¦ã®ã‚¯ãƒ©ã‚¹ã¯objectã‚’ç¶™æ‰¿ï¼‰
```

## ğŸ› ï¸ ã‚ˆãã‚ã‚‹é–“é•ã„ã¨ä¿®æ­£

### é–“é•ã„1: åˆæœŸåŒ–ã®é †åºãƒŸã‚¹

```python
# âŒ é–“é•ã„
class Dog(Animal):
    def __init__(self, name, breed):
        self.breed = breed  # å­ã‚’å…ˆã«åˆæœŸåŒ–
        super().__init__(name)  # å¾Œã‹ã‚‰è¦ª

# âœ… æ­£ã—ã„ï¼ˆæ¨å¥¨ï¼‰
class Dog(Animal):
    def __init__(self, name, breed):
        super().__init__(name)  # è¦ªã‚’å…ˆã«åˆæœŸåŒ–
        self.breed = breed  # ãã®å¾Œã€å­
```

### é–“é•ã„2: è¦ªã®å¼•æ•°ã‚’æ¸¡ã•ãªã„

```python
# âŒ é–“é•ã„
class Dog(Animal):
    def __init__(self, name, breed):
        super().__init__()  # nameã‚’æ¸¡ã—ã¦ã„ãªã„
        self.breed = breed

# âœ… æ­£ã—ã„
class Dog(Animal):
    def __init__(self, name, breed):
        super().__init__(name)  # å¼•æ•°ã‚’æ¸¡ã™
        self.breed = breed
```

### é–“é•ã„3: è¦ªã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Œå…¨ä¸Šæ›¸ã

```python
# âŒ éæ¨å¥¨ï¼ˆè¦ªã®å‡¦ç†ãŒå¤±ã‚ã‚Œã‚‹ï¼‰
class Animal:
    def move(self):
        print("ç§»å‹•")
        self.energy -= 10

class Dog(Animal):
    def move(self):
        print("èµ°ã‚‹")  # è¦ªã®å‡¦ç†ã‚’ç„¡è¦–

# âœ… æ¨å¥¨ï¼ˆè¦ªã‚’æ‹¡å¼µï¼‰
class Dog(Animal):
    def move(self):
        super().move()  # è¦ªã®å‡¦ç†ã‚’å®Ÿè¡Œ
        print("ã—ã£ã½ã‚’æŒ¯ã‚‹")  # è¿½åŠ å‡¦ç†
```

### é–“é•ã„4: ã‚¯ãƒ©ã‚¹å¤‰æ•°ã®ä¸Šæ›¸ã

```python
# âŒ æ„å›³ã—ãªã„å‹•ä½œ
class Animal:
    count = 0  # ã‚¯ãƒ©ã‚¹å¤‰æ•°
    
    def __init__(self):
        Animal.count += 1

class Dog(Animal):
    count = 0  # åˆ¥ã®ã‚¯ãƒ©ã‚¹å¤‰æ•°ã«ãªã‚‹
    
    def __init__(self):
        super().__init__()
        Dog.count += 1

# Animalã¨Dogã§åˆ¥ã€…ã«ã‚«ã‚¦ãƒ³ãƒˆ
a1 = Animal()
d1 = Dog()
print(Animal.count)  # 2ï¼ˆAnimalã¨Dogã®ä¸¡æ–¹ï¼‰
print(Dog.count)     # 1ï¼ˆDogã ã‘ï¼‰

# âœ… æ­£ã—ã„ï¼ˆã‚¯ãƒ©ã‚¹å¤‰æ•°ã‚’å…±æœ‰ï¼‰
class Dog(Animal):
    def __init__(self):
        super().__init__()
        # Animal.countã‚’ä½¿ã†ï¼ˆä¸Šæ›¸ãã—ãªã„ï¼‰
```

## ğŸ¯ å¤šé‡ç¶™æ‰¿ã®ãƒˆãƒ©ãƒ–ãƒ«

```python
# ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰ç¶™æ‰¿å•é¡Œ
class A:
    def method(self):
        print("A")

class B(A):
    def method(self):
        print("B")
        super().method()

class C(A):
    def method(self):
        print("C")
        super().method()

class D(B, C):
    def method(self):
        print("D")
        super().method()

# MROç¢ºèª
print([c.__name__ for c in D.mro()])
# ['D', 'B', 'C', 'A', 'object']

d = D()
d.method()
# å‡ºåŠ›:
# D
# B
# C
# A

# âœ… è§£æ±ºï¼šå¤šé‡ç¶™æ‰¿ã‚’é¿ã‘ã‚‹
class D:
    def __init__(self):
        self.b = B()  # ã‚³ãƒ³ãƒã‚¸ã‚·ãƒ§ãƒ³
        self.c = C()
    
    def method(self):
        self.b.method()
        self.c.method()
```

## ğŸ“ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ

```
ç¶™æ‰¿ã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸï¼
â”‚
â”œâ”€ AttributeError?
â”‚  â”œâ”€ super().__init__()ã‚’å‘¼ã‚“ã ï¼Ÿ
â”‚  â”‚  â””â”€ NO â†’ è¿½åŠ ã™ã‚‹
â”‚  â””â”€ è¦ªã«å±æ€§ãŒã‚ã‚‹ï¼Ÿ
â”‚     â””â”€ hasattr()ã§ç¢ºèª
â”‚
â”œâ”€ ãƒ¡ã‚½ãƒƒãƒ‰ãŒä¸Šæ›¸ãã•ã‚Œãªã„ï¼Ÿ
â”‚  â”œâ”€ ãƒ¡ã‚½ãƒƒãƒ‰åã¯æ­£ã—ã„ï¼Ÿ
â”‚  â”‚  â””â”€ ã‚¹ãƒšãƒ«ãƒã‚§ãƒƒã‚¯
â”‚  â””â”€ å¼•æ•°ã¯åˆã£ã¦ã„ã‚‹ï¼Ÿ
â”‚
â”œâ”€ è¦ªã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã¹ãªã„ï¼Ÿ
â”‚  â””â”€ super().method()ã‚’ä½¿ã†
â”‚
â”œâ”€ å‹ãƒã‚§ãƒƒã‚¯ãŒå‹•ã‹ãªã„ï¼Ÿ
â”‚  â””â”€ isinstance()ã‚’ä½¿ã†ï¼ˆtype()ã§ã¯ãªãï¼‰
â”‚
â””â”€ å¤šé‡ç¶™æ‰¿ã§æ··ä¹±ï¼Ÿ
   â”œâ”€ MROã‚’ç¢ºèªï¼ˆClass.mro()ï¼‰
   â””â”€ ã‚³ãƒ³ãƒã‚¸ã‚·ãƒ§ãƒ³ã‚’æ¤œè¨
```

## âœ… ç¶™æ‰¿ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

```python
class Child(Parent):
    def __init__(self, param1, param2):
        # â˜‘ super().__init__()ã‚’å‘¼ã‚“ã§ã„ã‚‹ã‹ï¼Ÿ
        super().__init__(param1)
        
        # â˜‘ è¦ªã®å¼•æ•°ã‚’æ¸¡ã—ã¦ã„ã‚‹ã‹ï¼Ÿ
        # â˜‘ å­ã®åˆæœŸåŒ–ã¯è¦ªã®å¾Œã‹ï¼Ÿ
        self.param2 = param2
    
    def method(self):
        # â˜‘ è¦ªã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã¶å¿…è¦ãŒã‚ã‚‹ã‹ï¼Ÿ
        result = super().method()
        
        # â˜‘ ãƒ¡ã‚½ãƒƒãƒ‰åã®ã‚¹ãƒšãƒ«ã¯æ­£ã—ã„ã‹ï¼Ÿ
        return f"{result} + è¿½åŠ å‡¦ç†"

# â˜‘ å‹ãƒã‚§ãƒƒã‚¯ã«isinstance()ã‚’ä½¿ã£ã¦ã„ã‚‹ã‹ï¼Ÿ
if isinstance(obj, Parent):
    obj.method()

# â˜‘ MROã¯æƒ³å®šé€šã‚Šã‹ï¼Ÿ
print(Child.mro())
```

## ğŸ’¡ ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

```python
# 1. å¸¸ã«super()ã‚’ä½¿ã†
class Child(Parent):
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)

# 2. è¦ªã‚’æ‹¡å¼µã™ã‚‹ï¼ˆå®Œå…¨ä¸Šæ›¸ãã—ãªã„ï¼‰
def method(self):
    super().method()  # è¦ªã®å‡¦ç†ã‚’å®Ÿè¡Œ
    # è¿½åŠ å‡¦ç†

# 3. å‹ãƒã‚§ãƒƒã‚¯ã¯isinstance()
if isinstance(obj, ParentClass):
    pass

# 4. å¤šé‡ç¶™æ‰¿ã¯é¿ã‘ã‚‹
# ã‚³ãƒ³ãƒã‚¸ã‚·ãƒ§ãƒ³ï¼ˆçµ„ã¿åˆã‚ã›ï¼‰ã‚’ä½¿ã†
class MyClass:
    def __init__(self):
        self.component1 = Component1()
        self.component2 = Component2()

# 5. ç¶™æ‰¿ã®æ·±ã•ã¯3éšå±¤ã¾ã§
# æ·±ã™ãã‚‹ç¶™æ‰¿ã¯é¿ã‘ã‚‹
Animal â†’ Mammal â†’ Dog  # OK
Animal â†’ ... â†’ ... â†’ ... â†’ Dog  # æ·±ã™ã
```

## ğŸ“ ã¾ã¨ã‚ï¼š5ã¤ã®é‰„å‰‡

```
1. å¿…ãšsuper().__init__()
   â†’ è¦ªã®åˆæœŸåŒ–ã‚’å¿˜ã‚Œãªã„

2. super()ã§ãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—
   â†’ è¦ªã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã¶æ™‚

3. isinstance()ã§å‹ãƒã‚§ãƒƒã‚¯
   â†’ type()ã§ã¯ãªã

4. MROã‚’ç†è§£ã™ã‚‹
   â†’ Class.mro()ã§ç¢ºèª

5. å¤šé‡ç¶™æ‰¿ã¯é¿ã‘ã‚‹
   â†’ ã‚³ãƒ³ãƒã‚¸ã‚·ãƒ§ãƒ³ã‚’ä½¿ã†
```

ã“ã‚Œã§Pythonç¶™æ‰¿ã®ãƒˆãƒ©ãƒ–ãƒ«ã¯å®Œå…¨è§£æ±ºï¼super()ã‚’å¿˜ã‚Œãšã«ä½¿ãˆã°ã€ã»ã¨ã‚“ã©ã®å•é¡Œã¯é˜²ã’ã¾ã™ ğŸ‰
